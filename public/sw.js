!function(){"use strict";function unescape(e){return e.replace(/\\('|\\)/g,"$1").replace(/[\r\t\n]/g," ")}const templateSettings={evaluate:/\{\{(([^\}]+|\\.)+)\}\}/g,interpolate:/\{\{=\s*([^\}]+)\}\}/g,stream:/\{\{~\s*([^\}]+)\}\}/g,conditional:/\{\{\?(\?)?\s*([^\}]*)?\}\}/g,node:"object"==typeof process,varname:"it"},compile=function(e,t,r){t=Object.assign({},templateSettings,t);e="var P=Promise.resolve.bind(Promise);function* f(p,a,b){yield p.then(v=>(a=v?a:b)&&'');yield* (a||(_=>[]))();};var s = function(x) { return x.then(stream => (stream.constructor.name === 'StreamReader') ? sNode : sWhatWg )};var sWhatWg=rW=>{\nrW=rW.then(l=>l.getReader());\nvar d=!1;\nreturn i={next:_=>({done:d,value:rW.then(rW=>rW.read()).then(v=>{d=v.done; return P(v.value)})}),[Symbol.iterator]:_=>i};\n};var sNode=rN=>{\nvar d=!1,l,b=[];\nrN.then(rN=>{\nrN.on('end',_=>{d=!0;l&&l()});\nrN.on('data',c=>(l&&(v=>{var t=l;l=null;t(v)})||(d=>b.push(d)))(c));\n});\nreturn i={next:_=>({done:b.length===0&&d,value:P(b.shift()||new Promise(rN=>l=rN))}),[Symbol.iterator]:_=>i};};var g=function*(){yield P('"+e.replace(/'|\\/g,"\\$&").replace(t.interpolate,function(e,t){return"');yield P("+unescape(t)+");yield P('"}).replace(t.conditional,function(e,t,r){return r&&!t?"');yield* f(P("+unescape(r)+"),function*(){yield P('":!r&&t?"')},function*(){yield P('":"')});yield P('"}).replace(t.stream,function(e,t){return"');yield* sWhatWg(P("+unescape(t)+"));yield P('"}).replace(t.evaluate,function(e,t){return"');"+unescape(t)+";yield P('"}).replace(/\n/g,"\\n").replace(/\t/g,"\\t").replace(/\r/g,"\\r")+"');}();",t.node?e+="var r = new R({read:function f() {\nvar d=g.next();\nif(d.done) return r.push(null);\nP(d.value).then(v=>{if(v)return r.push(Buffer.from(v));else f()});\n}});\nreturn r;\n":e+='var e=new TextEncoder();\nreturn new ReadableStream({\npull: c=>{\nvar v=g.next();\nif(v.done)return c.close();\nv.value.then(d=>{\nif(typeof(d)=="string")d=e.encode(d);\nd&&c.enqueue(d);\n});\nreturn v.value;\n}});';try{if(t.noEval)return e;if(t.node){const r=new Function(t.varname,"R",e);return e=>r(e,require("stream").Readable)}return new Function(t.varname,e)}catch(t){throw console.log("Could not create a template function: "+e),t}},entityMap={lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"À",Aacute:"Á",Acirc:"Â",Atilde:"Ã",Auml:"Ä",Aring:"Å",AElig:"Æ",Ccedil:"Ç",Egrave:"È",Eacute:"É",Ecirc:"Ê",Euml:"Ë",Igrave:"Ì",Iacute:"Í",Icirc:"Î",Iuml:"Ï",ETH:"Ð",Ntilde:"Ñ",Ograve:"Ò",Oacute:"Ó",Ocirc:"Ô",Otilde:"Õ",Ouml:"Ö",Oslash:"Ø",Ugrave:"Ù",Uacute:"Ú",Ucirc:"Û",Uuml:"Ü",Yacute:"Ý",THORN:"Þ",szlig:"ß",agrave:"à",aacute:"á",acirc:"â",atilde:"ã",auml:"ä",aring:"å",aelig:"æ",ccedil:"ç",egrave:"è",eacute:"é",ecirc:"ê",euml:"ë",igrave:"ì",iacute:"í",icirc:"î",iuml:"ï",eth:"ð",ntilde:"ñ",ograve:"ò",oacute:"ó",ocirc:"ô",otilde:"õ",ouml:"ö",oslash:"ø",ugrave:"ù",uacute:"ú",ucirc:"û",uuml:"ü",yacute:"ý",thorn:"þ",yuml:"ÿ",nbsp:" ",iexcl:"¡",cent:"¢",pound:"£",curren:"¤",yen:"¥",brvbar:"¦",sect:"§",uml:"¨",copy:"©",ordf:"ª",laquo:"«",not:"¬",shy:"­­",reg:"®",macr:"¯",deg:"°",plusmn:"±",sup2:"²",sup3:"³",acute:"´",micro:"µ",para:"¶",middot:"·",cedil:"¸",sup1:"¹",ordm:"º",raquo:"»",frac14:"¼",frac12:"½",frac34:"¾",iquest:"¿",times:"×",divide:"÷",forall:"∀",part:"∂",exist:"∃",empty:"∅",nabla:"∇",isin:"∈",notin:"∉",ni:"∋",prod:"∏",sum:"∑",minus:"−",lowast:"∗",radic:"√",prop:"∝",infin:"∞",ang:"∠",and:"∧",or:"∨",cap:"∩",cup:"∪",int:"∫",there4:"∴",sim:"∼",cong:"≅",asymp:"≈",ne:"≠",equiv:"≡",le:"≤",ge:"≥",sub:"⊂",sup:"⊃",nsub:"⊄",sube:"⊆",supe:"⊇",oplus:"⊕",otimes:"⊗",perp:"⊥",sdot:"⋅",Alpha:"Α",Beta:"Β",Gamma:"Γ",Delta:"Δ",Epsilon:"Ε",Zeta:"Ζ",Eta:"Η",Theta:"Θ",Iota:"Ι",Kappa:"Κ",Lambda:"Λ",Mu:"Μ",Nu:"Ν",Xi:"Ξ",Omicron:"Ο",Pi:"Π",Rho:"Ρ",Sigma:"Σ",Tau:"Τ",Upsilon:"Υ",Phi:"Φ",Chi:"Χ",Psi:"Ψ",Omega:"Ω",alpha:"α",beta:"β",gamma:"γ",delta:"δ",epsilon:"ε",zeta:"ζ",eta:"η",theta:"θ",iota:"ι",kappa:"κ",lambda:"λ",mu:"μ",nu:"ν",xi:"ξ",omicron:"ο",pi:"π",rho:"ρ",sigmaf:"ς",sigma:"σ",tau:"τ",upsilon:"υ",phi:"φ",chi:"χ",psi:"ψ",omega:"ω",thetasym:"ϑ",upsih:"ϒ",piv:"ϖ",OElig:"Œ",oelig:"œ",Scaron:"Š",scaron:"š",Yuml:"Ÿ",fnof:"ƒ",circ:"ˆ",tilde:"˜",ensp:" ",emsp:" ",thinsp:" ",zwnj:"‌",zwj:"‍",lrm:"‎",rlm:"‏",ndash:"–",mdash:"—",lsquo:"‘",rsquo:"’",sbquo:"‚",ldquo:"“",rdquo:"”",bdquo:"„",dagger:"†",Dagger:"‡",bull:"•",hellip:"…",permil:"‰",prime:"′",Prime:"″",lsaquo:"‹",rsaquo:"›",oline:"‾",euro:"€",trade:"™",larr:"←",uarr:"↑",rarr:"→",darr:"↓",harr:"↔",crarr:"↵",lceil:"⌈",rceil:"⌉",lfloor:"⌊",rfloor:"⌋",loz:"◊",spades:"♠",clubs:"♣",hearts:"♥",diams:"♦"};var nameStartChar=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,nameChar=new RegExp("[\\-\\.0-9"+nameStartChar.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),tagNamePattern=new RegExp("^"+nameStartChar.source+nameChar.source+"*(?::"+nameStartChar.source+nameChar.source+"*)?$"),S_TAG=0,S_ATTR=1,S_ATTR_SPACE=2,S_EQ=3,S_ATTR_NOQUOT_VALUE=4,S_ATTR_END=5,S_TAG_SPACE=6,S_TAG_CLOSE=7;function XMLReader(){}function parse(e,t,r,n,a){function s(e){var t=e.slice(1,-1);return t in r?r[t]:"#"===t.charAt(0)?function(e){if(e>65535){var t=55296+((e-=65536)>>10),r=56320+(1023&e);return String.fromCharCode(t,r)}return String.fromCharCode(e)}(parseInt(t.substr(1).replace("x","0x"))):(a.error("entity not found:"+e),e)}function o(t){if(t>m){var r=e.substring(m,t).replace(/&#?\w+;/g,s);u&&i(m),n.characters(r,0,t-m),m=t}}function i(t,r){for(;t>=l&&(r=h.exec(e));)c=r.index,l=c+r[0].length,u.lineNumber++;u.columnNumber=t-c+1}for(var c=0,l=0,h=/.*(?:\r\n?|\n)|.*$/g,u=n.locator,d=[{currentNSMap:t}],p={},m=0;;){try{var f=e.indexOf("<",m);if(f<0){if(!e.substr(m).match(/^\s*$/)){var g=n.doc,E=g.createTextNode(e.substr(m));g.appendChild(E),n.currentElement=E}return}switch(f>m&&o(f),e.charAt(f+1)){case"/":var N=e.indexOf(">",f+3),_=e.substring(f+2,N),w=d.pop();N<0?(_=e.substring(f+2).replace(/[\s<].*/,""),a.error("end tag name: "+_+" is not complete:"+w.tagName),N=f+1+_.length):_.match(/\s</)&&(_=_.replace(/[\s<].*/,""),a.error("end tag name: "+_+" maybe not complete"),N=f+1+_.length);var v=w.localNSMap,T=w.tagName==_;if(T||w.tagName&&w.tagName.toLowerCase()==_.toLowerCase()){if(n.endElement(w.uri,w.localName,_),v)for(var y in v)n.endPrefixMapping(y);T||a.fatalError("end tag name: "+_+" is not match the current start tagName:"+w.tagName)}else d.push(w);N++;break;case"?":u&&i(f),N=parseInstruction(e,f,n);break;case"!":u&&i(f),N=parseDCC(e,f,n,a);break;default:u&&i(f);var b=new ElementAttributes,x=d[d.length-1].currentNSMap,C=(N=parseElementStartPart(e,f,b,x,s,a),b.length);if(!b.closed&&fixSelfClosed(e,N,b.tagName,p)&&(b.closed=!0,r.nbsp||a.warning("unclosed xml attribute")),u&&C){for(var D=copyLocator(u,{}),R=0;R<C;R++){var S=b[R];i(S.offset),S.locator=copyLocator(u,{})}n.locator=D,appendElement(b,n,x)&&d.push(b),n.locator=u}else appendElement(b,n,x)&&d.push(b);"http://www.w3.org/1999/xhtml"!==b.uri||b.closed?N++:N=parseHtmlSpecialContent(e,N,b.tagName,s,n)}}catch(e){a.error("element parse error: "+e),N=-1}N>m?m=N:o(Math.max(f,m)+1)}}function copyLocator(e,t){return t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber,t}function parseElementStartPart(e,t,r,n,a,s){for(var o,i=++t,c=S_TAG;;){var l=e.charAt(i);switch(l){case"=":if(c===S_ATTR)o=e.slice(t,i),c=S_EQ;else{if(c!==S_ATTR_SPACE)throw new Error("attribute equal must after attrName");c=S_EQ}break;case"'":case'"':if(c===S_EQ||c===S_ATTR){if(c===S_ATTR&&(s.warning('attribute value must after "="'),o=e.slice(t,i)),t=i+1,!((i=e.indexOf(l,t))>0))throw new Error("attribute value no end '"+l+"' match");h=e.slice(t,i).replace(/&#?\w+;/g,a),r.add(o,h,t-1),c=S_ATTR_END}else{if(c!=S_ATTR_NOQUOT_VALUE)throw new Error('attribute value must after "="');h=e.slice(t,i).replace(/&#?\w+;/g,a),r.add(o,h,t),s.warning('attribute "'+o+'" missed start quot('+l+")!!"),t=i+1,c=S_ATTR_END}break;case"/":switch(c){case S_TAG:r.setTagName(e.slice(t,i));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:c=S_TAG_CLOSE,r.closed=!0;case S_ATTR_NOQUOT_VALUE:case S_ATTR:case S_ATTR_SPACE:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==S_TAG&&r.setTagName(e.slice(t,i)),i;case">":switch(c){case S_TAG:r.setTagName(e.slice(t,i));case S_ATTR_END:case S_TAG_SPACE:case S_TAG_CLOSE:break;case S_ATTR_NOQUOT_VALUE:case S_ATTR:"/"===(h=e.slice(t,i)).slice(-1)&&(r.closed=!0,h=h.slice(0,-1));case S_ATTR_SPACE:c===S_ATTR_SPACE&&(h=o),c==S_ATTR_NOQUOT_VALUE?(s.warning('attribute "'+h+'" missed quot(")!!'),r.add(o,h.replace(/&#?\w+;/g,a),t)):("http://www.w3.org/1999/xhtml"===n[""]&&h.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+h+'" missed value!! "'+h+'" instead!!'),r.add(h,h,t));break;case S_EQ:throw new Error("attribute value missed!!")}return i;case"":l=" ";default:if(l<=" ")switch(c){case S_TAG:r.setTagName(e.slice(t,i)),c=S_TAG_SPACE;break;case S_ATTR:o=e.slice(t,i),c=S_ATTR_SPACE;break;case S_ATTR_NOQUOT_VALUE:var h=e.slice(t,i).replace(/&#?\w+;/g,a);s.warning('attribute "'+h+'" missed quot(")!!'),r.add(o,h,t);case S_ATTR_END:c=S_TAG_SPACE}else switch(c){case S_ATTR_SPACE:r.tagName;"http://www.w3.org/1999/xhtml"===n[""]&&o.match(/^(?:disabled|checked|selected)$/i)||s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),r.add(o,o,t),t=i,c=S_ATTR;break;case S_ATTR_END:s.warning('attribute space is required"'+o+'"!!');case S_TAG_SPACE:c=S_ATTR,t=i;break;case S_EQ:c=S_ATTR_NOQUOT_VALUE,t=i;break;case S_TAG_CLOSE:throw new Error("elements closed character '/' and '>' must be connected to")}}i++}}function appendElement(e,t,r){for(var n=e.tagName,a=null,s=e.length;s--;){var o=e[s],i=o.qName,c=o.value;if((d=i.indexOf(":"))>0)var l=o.prefix=i.slice(0,d),h=i.slice(d+1),u="xmlns"===l&&h;else h=i,l=null,u="xmlns"===i&&"";o.localName=h,!1!==u&&(null==a&&(a={},_copy(r,r={})),r[u]=a[u]=c,o.uri="http://www.w3.org/2000/xmlns/",t.startPrefixMapping(u,c))}for(s=e.length;s--;){(l=(o=e[s]).prefix)&&("xml"===l&&(o.uri="http://www.w3.org/XML/1998/namespace"),"xmlns"!==l&&(o.uri=r[l||""]))}var d;(d=n.indexOf(":"))>0?(l=e.prefix=n.slice(0,d),h=e.localName=n.slice(d+1)):(l=null,h=e.localName=n);var p=e.uri=r[l||""];if(t.startElement(p,h,n,e),!e.closed)return e.currentNSMap=r,e.localNSMap=a,!0;if(t.endElement(p,h,n),a)for(l in a)t.endPrefixMapping(l)}function parseHtmlSpecialContent(e,t,r,n,a){if(/^(?:script|textarea)$/i.test(r)){var s=e.indexOf("</"+r+">",t),o=e.substring(t+1,s);if(/[&<]/.test(o))return/^script$/i.test(r)?(a.characters(o,0,o.length),s):(o=o.replace(/&#?\w+;/g,n),a.characters(o,0,o.length),s)}return t+1}function fixSelfClosed(e,t,r,n){var a=n[r];return null==a&&((a=e.lastIndexOf("</"+r+">"))<t&&(a=e.lastIndexOf("</"+r)),n[r]=a),a<t}function _copy(e,t){for(var r in e)t[r]=e[r]}function parseDCC(e,t,r,n){switch(e.charAt(t+2)){case"-":return"-"===e.charAt(t+3)?(a=e.indexOf("--\x3e",t+4))>t?(r.comment(e,t+4,a-t-4),a+3):(n.error("Unclosed comment"),-1):-1;default:if("CDATA["==e.substr(t+3,6)){var a=e.indexOf("]]>",t+9);return r.startCDATA(),r.characters(e,t+9,a-t-9),r.endCDATA(),a+3}var s=split(e,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var i=s[1][0],c=o>3&&/^public$/i.test(s[2][0])&&s[3][0],l=o>4&&s[4][0],h=s[o-1];return r.startDTD(i,c&&c.replace(/^(['"])(.*?)\1$/,"$2"),l&&l.replace(/^(['"])(.*?)\1$/,"$2")),r.endDTD(),h.index+h[0].length}}return-1}function parseInstruction(e,t,r){var n=e.indexOf("?>",t);if(n){var a=e.substring(t,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);if(a){a[0].length;return r.processingInstruction(a[1],a[2]),n+2}return-1}return-1}function ElementAttributes(e){}function split(e,t){var r,n=[],a=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(a.lastIndex=t,a.exec(e);r=a.exec(e);)if(n.push(r),r[1])return n}function copy(e,t){for(var r in e)t[r]=e[r]}function _extends(e,t){var r=e.prototype;if(!(r instanceof t)){function n(){}n.prototype=t.prototype,copy(r,n=new n),e.prototype=r=n}r.constructor!=e&&("function"!=typeof e&&console.error("unknow Class:"+e),r.constructor=e)}XMLReader.prototype={parse:function(e,t,r){var n=this.domBuilder;n.startDocument(),_copy(t,t={}),parse(e,t,r,n,this.errorHandler),n.endDocument()}},ElementAttributes.prototype={setTagName:function(e){if(!tagNamePattern.test(e))throw new Error("invalid tagName:"+e);this.tagName=e},add:function(e,t,r){if(!tagNamePattern.test(e))throw new Error("invalid attribute:"+e);this[this.length++]={qName:e,value:t,offset:r}},length:0,getLocalName:function(e){return this[e].localName},getLocator:function(e){return this[e].locator},getQName:function(e){return this[e].qName},getURI:function(e){return this[e].uri},getValue:function(e){return this[e].value}};var htmlns="http://www.w3.org/1999/xhtml",NodeType={},ELEMENT_NODE=NodeType.ELEMENT_NODE=1,ATTRIBUTE_NODE=NodeType.ATTRIBUTE_NODE=2,TEXT_NODE=NodeType.TEXT_NODE=3,CDATA_SECTION_NODE=NodeType.CDATA_SECTION_NODE=4,ENTITY_REFERENCE_NODE=NodeType.ENTITY_REFERENCE_NODE=5,ENTITY_NODE=NodeType.ENTITY_NODE=6,PROCESSING_INSTRUCTION_NODE=NodeType.PROCESSING_INSTRUCTION_NODE=7,COMMENT_NODE=NodeType.COMMENT_NODE=8,DOCUMENT_NODE=NodeType.DOCUMENT_NODE=9,DOCUMENT_TYPE_NODE=NodeType.DOCUMENT_TYPE_NODE=10,DOCUMENT_FRAGMENT_NODE=NodeType.DOCUMENT_FRAGMENT_NODE=11,NOTATION_NODE=NodeType.NOTATION_NODE=12,ExceptionCode={},ExceptionMessage={},INDEX_SIZE_ERR=ExceptionCode.INDEX_SIZE_ERR=(ExceptionMessage[1]="Index size error",1),DOMSTRING_SIZE_ERR=ExceptionCode.DOMSTRING_SIZE_ERR=(ExceptionMessage[2]="DOMString size error",2),HIERARCHY_REQUEST_ERR=ExceptionCode.HIERARCHY_REQUEST_ERR=(ExceptionMessage[3]="Hierarchy request error",3),WRONG_DOCUMENT_ERR=ExceptionCode.WRONG_DOCUMENT_ERR=(ExceptionMessage[4]="Wrong document",4),INVALID_CHARACTER_ERR=ExceptionCode.INVALID_CHARACTER_ERR=(ExceptionMessage[5]="Invalid character",5),NO_DATA_ALLOWED_ERR=ExceptionCode.NO_DATA_ALLOWED_ERR=(ExceptionMessage[6]="No data allowed",6),NO_MODIFICATION_ALLOWED_ERR=ExceptionCode.NO_MODIFICATION_ALLOWED_ERR=(ExceptionMessage[7]="No modification allowed",7),NOT_FOUND_ERR=ExceptionCode.NOT_FOUND_ERR=(ExceptionMessage[8]="Not found",8),NOT_SUPPORTED_ERR=ExceptionCode.NOT_SUPPORTED_ERR=(ExceptionMessage[9]="Not supported",9),INUSE_ATTRIBUTE_ERR=ExceptionCode.INUSE_ATTRIBUTE_ERR=(ExceptionMessage[10]="Attribute in use",10),INVALID_STATE_ERR=ExceptionCode.INVALID_STATE_ERR=(ExceptionMessage[11]="Invalid state",11),SYNTAX_ERR=ExceptionCode.SYNTAX_ERR=(ExceptionMessage[12]="Syntax error",12),INVALID_MODIFICATION_ERR=ExceptionCode.INVALID_MODIFICATION_ERR=(ExceptionMessage[13]="Invalid modification",13),NAMESPACE_ERR=ExceptionCode.NAMESPACE_ERR=(ExceptionMessage[14]="Invalid namespace",14),INVALID_ACCESS_ERR=ExceptionCode.INVALID_ACCESS_ERR=(ExceptionMessage[15]="Invalid access",15);function DOMException(e,t){if(t instanceof Error)var r=t;else r=this,Error.call(this,ExceptionMessage[e]),this.message=ExceptionMessage[e],Error.captureStackTrace&&Error.captureStackTrace(this,DOMException);return r.code=e,t&&(this.message=this.message+": "+t),r}function NodeList(){}function LiveNodeList(e,t){this._node=e,this._refresh=t,_updateLiveList(this)}function _updateLiveList(e){var t=e._node._inc||e._node.ownerDocument._inc;if(e._inc!=t){var r=e._refresh(e._node);__set__(e,"length",r.length),copy(r,e),e._inc=t}}function NamedNodeMap(){}function _findNodeIndex(e,t){for(var r=e.length;r--;)if(e[r]===t)return r}function _addNamedNode(e,t,r,n){if(n?t[_findNodeIndex(t,n)]=r:t[t.length++]=r,e){r.ownerElement=e;var a=e.ownerDocument;a&&(n&&_onRemoveAttribute(a,e,n),_onAddAttribute(a,e,r))}}function _removeNamedNode(e,t,r){var n=_findNodeIndex(t,r);if(!(n>=0))throw DOMException(NOT_FOUND_ERR,new Error(e.tagName+"@"+r));for(var a=t.length-1;n<a;)t[n]=t[++n];if(t.length=a,e){var s=e.ownerDocument;s&&(_onRemoveAttribute(s,e,r),r.ownerElement=null)}}function DOMImplementation(e){if(this._features={},e)for(var t in e)this._features=e[t]}function Node(){}function _xmlEncoder(e){return("<"==e?"&lt;":">"==e&&"&gt;")||"&"==e&&"&amp;"||'"'==e&&"&quot;"||"&#"+e.charCodeAt()+";"}function _visitNode(e,t){if(t(e))return!0;if(e=e.firstChild)do{if(_visitNode(e,t))return!0}while(e=e.nextSibling)}function Document(){}function _onAddAttribute(e,t,r){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&(t._nsMap[r.prefix?r.localName:""]=r.value)}function _onRemoveAttribute(e,t,r,n){e&&e._inc++,"http://www.w3.org/2000/xmlns/"==r.namespaceURI&&delete t._nsMap[r.prefix?r.localName:""]}function _onUpdateChild(e,t,r){if(e&&e._inc){e._inc++;var n=t.childNodes;if(r)n[n.length++]=r;else{for(var a=t.firstChild,s=0;a;)n[s++]=a,a=a.nextSibling;n.length=s}}}function _removeChild(e,t){var r=t.previousSibling,n=t.nextSibling;return r?r.nextSibling=n:e.firstChild=n,n?n.previousSibling=r:e.lastChild=r,_onUpdateChild(e.ownerDocument,e),t}function _insertBefore(e,t,r){var n=t.parentNode;if(n&&n.removeChild(t),t.nodeType===DOCUMENT_FRAGMENT_NODE){var a=t.firstChild;if(null==a)return t;var s=t.lastChild}else a=s=t;var o=r?r.previousSibling:e.lastChild;a.previousSibling=o,s.nextSibling=r,o?o.nextSibling=a:e.firstChild=a,null==r?e.lastChild=s:r.previousSibling=s;do{a.parentNode=e}while(a!==s&&(a=a.nextSibling));return _onUpdateChild(e.ownerDocument||e,e),t.nodeType==DOCUMENT_FRAGMENT_NODE&&(t.firstChild=t.lastChild=null),t}function _appendSingleChild(e,t){var r=t.parentNode;if(r){var n=e.lastChild;r.removeChild(t);n=e.lastChild}n=e.lastChild;return t.parentNode=e,t.previousSibling=n,t.nextSibling=null,n?n.nextSibling=t:e.firstChild=t,e.lastChild=t,_onUpdateChild(e.ownerDocument,e,t),t}function Element(){this._nsMap={}}function Attr(){}function CharacterData(){}function Text(){}function Comment(){}function CDATASection(){}function DocumentType(){}function Notation(){}function Entity(){}function EntityReference(){}function DocumentFragment(){}function ProcessingInstruction(){}function nodeSerializeToString(e,t){var r=[],n=9==this.nodeType&&this.documentElement||this,a=n.prefix,s=n.namespaceURI;if(s&&null==a&&null==(a=n.lookupPrefix(s)))var o=[{namespace:s,prefix:null}];return serializeToString(this,r,e,t,o),r.join("")}function needNamespaceDefine(e,t,r){var n=e.prefix||"",a=e.namespaceURI;if(!n&&!a)return!1;if("xml"===n&&"http://www.w3.org/XML/1998/namespace"===a||"http://www.w3.org/2000/xmlns/"==a)return!1;for(var s=r.length;s--;){var o=r[s];if(o.prefix==n)return o.namespace!=a}return!0}function serializeToString(e,t,r,n,a){if(n){if(!(e=n(e)))return;if("string"==typeof e)return void t.push(e)}switch(e.nodeType){case ELEMENT_NODE:a||(a=[]);a.length;var s=e.attributes,o=s.length,i=e.firstChild,c=e.tagName;r=htmlns===e.namespaceURI||r,t.push("<",c);for(var l=0;l<o;l++){"xmlns"==(h=s.item(l)).prefix?a.push({prefix:h.localName,namespace:h.value}):"xmlns"==h.nodeName&&a.push({prefix:"",namespace:h.value})}for(l=0;l<o;l++){var h;if(needNamespaceDefine(h=s.item(l),r,a)){var u=h.prefix||"",d=h.namespaceURI,p=u?" xmlns:"+u:" xmlns";t.push(p,'="',d,'"'),a.push({prefix:u,namespace:d})}serializeToString(h,t,r,n,a)}if(needNamespaceDefine(e,r,a)){u=e.prefix||"",d=e.namespaceURI,p=u?" xmlns:"+u:" xmlns";t.push(p,'="',d,'"'),a.push({prefix:u,namespace:d})}if(i||r&&!/^(?:meta|link|img|br|hr|input)$/i.test(c)){if(t.push(">"),r&&/^script$/i.test(c))for(;i;)i.data?t.push(i.data):serializeToString(i,t,r,n,a),i=i.nextSibling;else for(;i;)serializeToString(i,t,r,n,a),i=i.nextSibling;t.push("</",c,">")}else t.push("/>");return;case DOCUMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(i=e.firstChild;i;)serializeToString(i,t,r,n,a),i=i.nextSibling;return;case ATTRIBUTE_NODE:return t.push(" ",e.name,'="',e.value.replace(/[<&"]/g,_xmlEncoder),'"');case TEXT_NODE:return t.push(e.data.replace(/[<&]/g,_xmlEncoder));case CDATA_SECTION_NODE:return t.push("<![CDATA[",e.data,"]]>");case COMMENT_NODE:return t.push("\x3c!--",e.data,"--\x3e");case DOCUMENT_TYPE_NODE:var m=e.publicId,f=e.systemId;if(t.push("<!DOCTYPE ",e.name),m)t.push(' PUBLIC "',m),f&&"."!=f&&t.push('" "',f),t.push('">');else if(f&&"."!=f)t.push(' SYSTEM "',f,'">');else{var g=e.internalSubset;g&&t.push(" [",g,"]"),t.push(">")}return;case PROCESSING_INSTRUCTION_NODE:return t.push("<?",e.target," ",e.data,"?>");case ENTITY_REFERENCE_NODE:return t.push("&",e.nodeName,";");default:t.push("??",e.nodeName)}}function importNode(e,t,r){var n;switch(t.nodeType){case ELEMENT_NODE:(n=t.cloneNode(!1)).ownerDocument=e;case DOCUMENT_FRAGMENT_NODE:break;case ATTRIBUTE_NODE:r=!0}if(n||(n=t.cloneNode(!1)),n.ownerDocument=e,n.parentNode=null,r)for(var a=t.firstChild;a;)n.appendChild(importNode(e,a,r)),a=a.nextSibling;return n}function cloneNode(e,t,r){var n=new t.constructor;for(var a in t){var s=t[a];"object"!=typeof s&&s!=n[a]&&(n[a]=s)}switch(t.childNodes&&(n.childNodes=new NodeList),n.ownerDocument=e,n.nodeType){case ELEMENT_NODE:var o=t.attributes,i=n.attributes=new NamedNodeMap,c=o.length;i._ownerElement=n;for(var l=0;l<c;l++)n.setAttributeNode(cloneNode(e,o.item(l),!0));break;case ATTRIBUTE_NODE:r=!0}if(r)for(var h=t.firstChild;h;)n.appendChild(cloneNode(e,h,r)),h=h.nextSibling;return n}function __set__(e,t,r){e[t]=r}DOMException.prototype=Error.prototype,copy(ExceptionCode,DOMException),NodeList.prototype={length:0,item:function(e){return this[e]||null},toString:function(e,t){for(var r=[],n=0;n<this.length;n++)serializeToString(this[n],r,e,t);return r.join("")}},LiveNodeList.prototype.item=function(e){return _updateLiveList(this),this[e]},_extends(LiveNodeList,NodeList),NamedNodeMap.prototype={length:0,item:NodeList.prototype.item,getNamedItem:function(e){for(var t=this.length;t--;){var r=this[t];if(r.nodeName==e)return r}},setNamedItem:function(e){var t=e.ownerElement;if(t&&t!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);var r=this.getNamedItem(e.nodeName);return _addNamedNode(this._ownerElement,this,e,r),r},setNamedItemNS:function(e){var t,r=e.ownerElement;if(r&&r!=this._ownerElement)throw new DOMException(INUSE_ATTRIBUTE_ERR);return t=this.getNamedItemNS(e.namespaceURI,e.localName),_addNamedNode(this._ownerElement,this,e,t),t},removeNamedItem:function(e){var t=this.getNamedItem(e);return _removeNamedNode(this._ownerElement,this,t),t},removeNamedItemNS:function(e,t){var r=this.getNamedItemNS(e,t);return _removeNamedNode(this._ownerElement,this,r),r},getNamedItemNS:function(e,t){for(var r=this.length;r--;){var n=this[r];if(n.localName==t&&n.namespaceURI==e)return n}return null}},DOMImplementation.prototype={hasFeature:function(e,t){var r=this._features[e.toLowerCase()];return!(!r||t&&!(t in r))},createDocument:function(e,t,r){var n=new Document;if(n.implementation=this,n.childNodes=new NodeList,n.doctype=r,r&&n.appendChild(r),t){var a=n.createElementNS(e,t);n.appendChild(a)}return n},createDocumentType:function(e,t,r){var n=new DocumentType;return n.name=e,n.nodeName=e,n.publicId=t,n.systemId=r,n}},Node.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(e,t){return _insertBefore(this,e,t)},replaceChild:function(e,t){this.insertBefore(e,t),t&&this.removeChild(t)},removeChild:function(e){return _removeChild(this,e)},appendChild:function(e){return this.insertBefore(e,null)},hasChildNodes:function(){return null!=this.firstChild},cloneNode:function(e){return cloneNode(this.ownerDocument||this,this,e)},normalize:function(){for(var e=this.firstChild;e;){var t=e.nextSibling;t&&t.nodeType==TEXT_NODE&&e.nodeType==TEXT_NODE?(this.removeChild(t),e.appendData(t.data)):(e.normalize(),e=t)}},isSupported:function(e,t){return this.ownerDocument.implementation.hasFeature(e,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(e){for(var t=this;t;){var r=t._nsMap;if(r)for(var n in r)if(r[n]==e)return n;t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(e){for(var t=this;t;){var r=t._nsMap;if(r&&e in r)return r[e];t=t.nodeType==ATTRIBUTE_NODE?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(e){return null==this.lookupPrefix(e)}},copy(NodeType,Node),copy(NodeType,Node.prototype),Document.prototype={nodeName:"#document",nodeType:DOCUMENT_NODE,doctype:null,documentElement:null,_inc:1,insertBefore:function(e,t){if(e.nodeType==DOCUMENT_FRAGMENT_NODE){for(var r=e.firstChild;r;){var n=r.nextSibling;this.insertBefore(r,t),r=n}return e}return null==this.documentElement&&e.nodeType==ELEMENT_NODE&&(this.documentElement=e),_insertBefore(this,e,t),e.ownerDocument=this,e},removeChild:function(e){return this.documentElement==e&&(this.documentElement=null),_removeChild(this,e)},importNode:function(e,t){return importNode(this,e,t)},getElementById:function(e){var t=null;return _visitNode(this.documentElement,function(r){if(r.nodeType==ELEMENT_NODE&&r.getAttribute("id")==e)return t=r,!0}),t},createElement:function(e){var t=new Element;return t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.childNodes=new NodeList,(t.attributes=new NamedNodeMap)._ownerElement=t,t},createDocumentFragment:function(){var e=new DocumentFragment;return e.ownerDocument=this,e.childNodes=new NodeList,e},createTextNode:function(e){var t=new Text;return t.ownerDocument=this,t.appendData(e),t},createComment:function(e){var t=new Comment;return t.ownerDocument=this,t.appendData(e),t},createCDATASection:function(e){var t=new CDATASection;return t.ownerDocument=this,t.appendData(e),t},createProcessingInstruction:function(e,t){var r=new ProcessingInstruction;return r.ownerDocument=this,r.tagName=r.target=e,r.nodeValue=r.data=t,r},createAttribute:function(e){var t=new Attr;return t.ownerDocument=this,t.name=e,t.nodeName=e,t.localName=e,t.specified=!0,t},createEntityReference:function(e){var t=new EntityReference;return t.ownerDocument=this,t.nodeName=e,t},createElementNS:function(e,t){var r=new Element,n=t.split(":"),a=r.attributes=new NamedNodeMap;return r.childNodes=new NodeList,r.ownerDocument=this,r.nodeName=t,r.tagName=t,r.namespaceURI=e,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,a._ownerElement=r,r},createAttributeNS:function(e,t){var r=new Attr,n=t.split(":");return r.ownerDocument=this,r.nodeName=t,r.name=t,r.namespaceURI=e,r.specified=!0,2==n.length?(r.prefix=n[0],r.localName=n[1]):r.localName=t,r}},_extends(Document,Node),Element.prototype={nodeType:ELEMENT_NODE,hasAttribute:function(e){return null!=this.getAttributeNode(e)},getAttribute:function(e){var t=this.getAttributeNode(e);return t&&t.value||""},getAttributeNode:function(e){return this.attributes.getNamedItem(e)},setAttribute:function(e,t){var r=this.ownerDocument.createAttribute(e);r.value=r.nodeValue=""+t,this.setAttributeNode(r)},removeAttribute:function(e){var t=this.getAttributeNode(e);t&&this.removeAttributeNode(t)},appendChild:function(e){return e.nodeType===DOCUMENT_FRAGMENT_NODE?this.insertBefore(e,null):_appendSingleChild(this,e)},setAttributeNode:function(e){return this.attributes.setNamedItem(e)},setAttributeNodeNS:function(e){return this.attributes.setNamedItemNS(e)},removeAttributeNode:function(e){return this.attributes.removeNamedItem(e.nodeName)},removeAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);r&&this.removeAttributeNode(r)},hasAttributeNS:function(e,t){return null!=this.getAttributeNodeNS(e,t)},getAttributeNS:function(e,t){var r=this.getAttributeNodeNS(e,t);return r&&r.value||""},setAttributeNS:function(e,t,r){var n=this.ownerDocument.createAttributeNS(e,t);n.value=n.nodeValue=""+r,this.setAttributeNode(n)},getAttributeNodeNS:function(e,t){return this.attributes.getNamedItemNS(e,t)},getElementsByTagName:function(e){return new LiveNodeList(this,function(t){var r=[];return _visitNode(t,function(n){n===t||n.nodeType!=ELEMENT_NODE||"*"!==e&&n.tagName!=e||r.push(n)}),r})},getElementsByTagNameNS:function(e,t){return new LiveNodeList(this,function(r){var n=[];return _visitNode(r,function(a){a===r||a.nodeType!==ELEMENT_NODE||"*"!==e&&a.namespaceURI!==e||"*"!==t&&a.localName!=t||n.push(a)}),n})}},Document.prototype.getElementsByTagName=Element.prototype.getElementsByTagName,Document.prototype.getElementsByTagNameNS=Element.prototype.getElementsByTagNameNS,_extends(Element,Node),Attr.prototype.nodeType=ATTRIBUTE_NODE,_extends(Attr,Node),CharacterData.prototype={data:"",substringData:function(e,t){return this.data.substring(e,e+t)},appendData:function(e){e=this.data+e,this.nodeValue=this.data=e,this.length=e.length},insertData:function(e,t){this.replaceData(e,0,t)},appendChild:function(e){throw new Error(ExceptionMessage[HIERARCHY_REQUEST_ERR])},deleteData:function(e,t){this.replaceData(e,t,"")},replaceData:function(e,t,r){r=this.data.substring(0,e)+r+this.data.substring(e+t),this.nodeValue=this.data=r,this.length=r.length}},_extends(CharacterData,Node),Text.prototype={nodeName:"#text",nodeType:TEXT_NODE,splitText:function(e){var t=this.data,r=t.substring(e);t=t.substring(0,e),this.data=this.nodeValue=t,this.length=t.length;var n=this.ownerDocument.createTextNode(r);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}},_extends(Text,CharacterData),Comment.prototype={nodeName:"#comment",nodeType:COMMENT_NODE},_extends(Comment,CharacterData),CDATASection.prototype={nodeName:"#cdata-section",nodeType:CDATA_SECTION_NODE},_extends(CDATASection,CharacterData),DocumentType.prototype.nodeType=DOCUMENT_TYPE_NODE,_extends(DocumentType,Node),Notation.prototype.nodeType=NOTATION_NODE,_extends(Notation,Node),Entity.prototype.nodeType=ENTITY_NODE,_extends(Entity,Node),EntityReference.prototype.nodeType=ENTITY_REFERENCE_NODE,_extends(EntityReference,Node),DocumentFragment.prototype.nodeName="#document-fragment",DocumentFragment.prototype.nodeType=DOCUMENT_FRAGMENT_NODE,_extends(DocumentFragment,Node),ProcessingInstruction.prototype.nodeType=PROCESSING_INSTRUCTION_NODE,_extends(ProcessingInstruction,Node),Node.prototype.toString=nodeSerializeToString;try{if(Object.defineProperty){function getTextContent(e){switch(e.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:var t=[];for(e=e.firstChild;e;)7!==e.nodeType&&8!==e.nodeType&&t.push(getTextContent(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}}Object.defineProperty(LiveNodeList.prototype,"length",{get:function(){return _updateLiveList(this),this.$$length}}),Object.defineProperty(Node.prototype,"textContent",{get:function(){return getTextContent(this)},set:function(e){switch(this.nodeType){case ELEMENT_NODE:case DOCUMENT_FRAGMENT_NODE:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),__set__=function(e,t,r){e["$$"+t]=r}}}catch(e){}function DOMParser(e){this.options=e||{locator:{}}}function buildErrorHandler(e,t,r){if(!e){if(t instanceof DOMHandler)return t;e=t}var n={},a=e instanceof Function;function s(t){var s=e[t];!s&&a&&(s=2==e.length?function(r){e(t,r)}:e),n[t]=s&&function(e){s("[xmldom "+t+"]\t"+e+_locator(r))}||function(){}}return r=r||{},s("warning"),s("error"),s("fatalError"),n}function DOMHandler(){this.cdata=!1}function position(e,t){t.lineNumber=e.lineNumber,t.columnNumber=e.columnNumber}function _locator(e){if(e)return"\n@"+(e.systemId||"")+"#[line:"+e.lineNumber+",col:"+e.columnNumber+"]"}function _toString(e,t,r){return"string"==typeof e?e.substr(t,r):e.length>=t+r||t?new java.lang.String(e,t,r)+"":e}function appendElement$1(e,t){e.currentElement?e.currentElement.appendChild(t):e.doc.appendChild(t)}DOMParser.prototype.parseFromString=function(e,t){var r=this.options,n=new XMLReader,a=r.domBuilder||new DOMHandler,s=r.errorHandler,o=r.locator,i=r.xmlns||{},c=/\/x?html?$/.test(t),l=c?entityMap:{lt:"<",gt:">",amp:"&",quot:'"',apos:"'"};return o&&a.setDocumentLocator(o),n.errorHandler=buildErrorHandler(s,a,o),n.domBuilder=r.domBuilder||a,c&&(i[""]="http://www.w3.org/1999/xhtml"),i.xml=i.xml||"http://www.w3.org/XML/1998/namespace",e?n.parse(e,i,l):n.errorHandler.error("invalid doc source"),a.doc},DOMHandler.prototype={startDocument:function(){this.doc=(new DOMImplementation).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(e,t,r,n){var a=this.doc,s=a.createElementNS(e,r||t),o=n.length;appendElement$1(this,s),this.currentElement=s,this.locator&&position(this.locator,s);for(var i=0;i<o;i++){e=n.getURI(i);var c=n.getValue(i),l=(r=n.getQName(i),a.createAttributeNS(e,r));this.locator&&position(n.getLocator(i),l),l.value=l.nodeValue=c,s.setAttributeNode(l)}},endElement:function(e,t,r){var n=this.currentElement;n.tagName;this.currentElement=n.parentNode},startPrefixMapping:function(e,t){},endPrefixMapping:function(e){},processingInstruction:function(e,t){var r=this.doc.createProcessingInstruction(e,t);this.locator&&position(this.locator,r),appendElement$1(this,r)},ignorableWhitespace:function(e,t,r){},characters:function(e,t,r){if(e=_toString.apply(this,arguments)){if(this.cdata)var n=this.doc.createCDATASection(e);else n=this.doc.createTextNode(e);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(e)&&this.doc.appendChild(n),this.locator&&position(this.locator,n)}},skippedEntity:function(e){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(e){(this.locator=e)&&(e.lineNumber=0)},comment:function(e,t,r){e=_toString.apply(this,arguments);var n=this.doc.createComment(e);this.locator&&position(this.locator,n),appendElement$1(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(e,t,r){var n=this.doc.implementation;if(n&&n.createDocumentType){var a=n.createDocumentType(e,t,r);this.locator&&position(this.locator,a),appendElement$1(this,a)}},warning:function(e){console.warn("[xmldom warning]\t"+e,_locator(this.locator))},error:function(e){console.error("[xmldom error]\t"+e,_locator(this.locator))},fatalError:function(e){throw console.error("[xmldom fatalError]\t"+e,_locator(this.locator)),e}},"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(e){DOMHandler.prototype[e]=function(){return null}});const templatePath={};var loadTemplate=e=>e in templatePath?(console.log(`loading ${e} from cache`),templatePath[e].clone().body):caches$1.match(new Request$1(e)).then(t=>t||fetch$1(new Request$1(e))).then(t=>(templatePath[e]=t.clone(),t.body)),configCache={},loadData=e=>{if(e in configCache)return Promise.resolve(configCache[e].then(e=>e.clone()));const t=new Request$1(e),r=caches$1.open("data").then(r=>r.match(t.clone()).then(t=>{const n=fetch$1(e).then(t=>(r.put(e,t.clone()),t)).catch(e=>new Response$1("Not found.",{status:"404"}));return t||n}));return configCache[e]=r.then(e=>e.clone()),r};function compileTemplate(e){return console.log(`loading template ${e}`),loadTemplate(e).then(e=>streamToString(e)).then(e=>compile(e,{node:!1,evaluate:/\$\$(([^\$]+|\\.)+)\$\$/g}))}function streamToString(e){const t=e.getReader();let r,n,a=new Uint8Array;const s=new Promise((e,t)=>{r=e,n=t});return function e(){return t.read().then(({value:t,done:n})=>{if(n){const e=new TextDecoder;return r(e.decode(a))}let s=new Uint8Array(a.length+t.length);return s.set(a),s.set(t,a.length),a=s,e()},e=>n(e))}(),s}var fetch$1=eval("self.fetch"),WritableStream=eval("self.WritableStream"),ReadableStream=eval("self.ReadableStream"),Request$1=eval("self.Request"),Response$1=eval("self.Response"),caches$1=eval("self.caches");const parseUrl=e=>new URL(e.url).searchParams.get("url"),getProxyUrl=e=>e.url,getProxyHeaders=e=>({}),paths={assetPath:"/assets/",dataPath:"/data/"},cacheStorage={},proxyShouldHitNetwork=!0;var common=Object.freeze({compileTemplate:compileTemplate,loadTemplate:loadTemplate,loadData:loadData,streamToString:streamToString,DOMParser:DOMParser,WritableStream:WritableStream,ReadableStream:ReadableStream,Request:Request$1,Response:Response$1,fetch:fetch$1,caches:caches$1,cacheStorage:cacheStorage,parseUrl:parseUrl,getProxyUrl:getProxyUrl,getProxyHeaders:getProxyHeaders,proxyShouldHitNetwork:proxyShouldHitNetwork,paths:paths});let templates={};function getCompiledTemplate(e){return e in templates?Promise.resolve(templates[e]):compileTemplate$1(e).then(t=>templates[e]=t)}function generateCSPPolicy(e){return`default-src 'self'; script-src 'self' https://www.googletagmanager.com https://www.google-analytics.com 'nonce-script-${e.analytics}' 'unsafe-eval'; connect-src 'self'; img-src 'self' data: https://www.google-analytics.com; style-src 'self' 'nonce-style-${e.style}' 'nonce-style-${e.inlinedcss}';`}function generateIncrementalNonce(e){let t=0,r=Math.pow(10,3);return()=>{let n=r*+new Date;return t>=r?t=0:t++,(void 0!==e?e:"")+(n+t).toString()}}var ConcatStream=function(){let e;this.readable=new ReadableStream$1({start(t){e=t},abort(e){this.writable.abort(e)}}),this.writable=new WritableStream$1({write(t){e.enqueue(t)},close(){e.close()},abort(t){e.error(new Error(t))}})};const compileTemplate$1=compileTemplate,loadData$1=loadData,CommonDOMParser=DOMParser,ReadableStream$1=ReadableStream,WritableStream$1=WritableStream,fetch$2=fetch$1,Request$2=Request$1,Response$2=Response$1,caches$2=caches$1,parseUrl$1=parseUrl,getProxyUrl$1=getProxyUrl,getProxyHeaders$1=getProxyHeaders,paths$1=paths,findNode=(e,t)=>{let r;for(let n=0;n<t.length;n++)if((r=t[n]).tagName==e)return r},findNodes=(e,t)=>{const r=[];let n;for(let a=0;a<t.length;a++)(n=t[a]).tagName==e&&r.push(n);return r},hardSanitize=(e,t)=>{t=t||100;let r=!1;const n=[];for(let a of e){if(n.length>t)break;"<"!=a?">"!=a||1!=r?"\n"!=a&&"\r"!=a&&(r||n.push(a)):r=!1:r=!0}return n.join("")},findElementText=(e,t)=>{const r=findNodes(e,t.childNodes);return r&&r.length>0?r[0].textContent:""},findElementAttribute=(e,t,r)=>{const n=findNodes(e,r.childNodes);if(n&&n.length>0){const e=n[0].attributes.getNamedItem(t);return void 0!==e?e.value:""}return""},attributeEquals=(e,t)=>r=>{const n=r.attributes.getNamedItem(e);return n&&n.value===t},convertFeedItemsToJSON=e=>{if(void 0===e)return[];const t=(new CommonDOMParser).parseFromString(e,"application/xml").documentElement,r={};if(null===t)return[];if("rss"===t.nodeName){const e=findNode("channel",t.childNodes),n=findElementText("title",e),a=findElementText("link",e),s=findNodes("item",e.childNodes);return r.title=n,r.link=a,s.map(e=>convertRSSItemToJSON(e,r))}if("feed"===t.nodeName){const e=findNodes("entry",t.childNodes),n=findElementText("title",t),a="";findNodes("link",t).filter(attributeEquals("rel","self"))[0];return r.title=n,r.link=a,e.map(e=>convertAtomItemToJSON(e,r))}return[]},convertAtomItemToJSON=(e,t)=>{const r=findElementText("title",e),n=findElementText("summary",e),a=findElementText("id",e),s=findElementText("updated",e),o=findElementText("author",e)||findElementText("dc:creator",e)||t.title,i=findElementAttribute("link","href",e);return{title:hardSanitize(r,400),guid:a,description:hardSanitize(n,100),pubDate:s,author:o,link:i}},convertRSSItemToJSON=(e,t)=>{const r=findElementText("title",e),n=findElementText("description",e),a=findElementText("guid",e),s=findElementText("pubDate",e)||findElementText("a10:updated",e),o=findElementText("author",e)||findElementText("dc:creator",e)||t.title,i=findElementText("link",e),c=findElementText("content:encoded",e);return{title:hardSanitize(r,400),guid:a,description:hardSanitize(n,100),"content:encoded":hardSanitize(c,100),pubDate:s,author:o,link:i}},root=(e,t,r)=>{const n=loadData$1(`${t.dataPath}config.json`).then(e=>e.json()),a=new ConcatStream,s=fetchCachedFeedData(n,r.item,r.column),o={styles:r.columnsStyle.then(t=>n.then(r=>t({config:r,nonce:e}))),data:r.columns.then(e=>s.then(t=>e({columns:t}))),itemTemplate:r.item.then(e=>e({options:{includeAuthor:!1,new:!0},item:{}}))};return r.head.then(t=>t({config:n,streams:o,nonce:e})).then(e=>e.pipeTo(a.writable)),Promise.resolve(new Response$2(a.readable,{status:"200"}))},fetchCachedFeedData=(e,t,r)=>{const n=(e,t)=>e?e.match(new Request$2(t)).then(e=>e?e.text():void 0):Promise.resolve(),a={includeAuthor:!1},s=e=>t.then(t=>t({templateOptions:a,items:e}));return caches$2.open("data").then(t=>e.then(e=>((e,t)=>t.columns.map(r=>({config:r,data:n(e,`${t.origin}/proxy?url=${encodeURIComponent(r.feedUrl)}`).then(e=>convertFeedItemsToJSON(e))})))(t,e))).then(e=>e.map(e=>e.data.then(t=>({config:e.config,items:s(t)})))).then(e=>e.map(e=>r.then(t=>e.then(e=>{return t({column:e})}))))},handler=root,proxyHandler=(e,t)=>{const r=loadData$1(`${t.dataPath}config.json`).then(e=>e.json()),n=parseUrl$1(e);return r.then(t=>t.columns.map(e=>e.feedUrl).indexOf(n)<0&&0==n.endsWith("/all.rss")?new Response$2("Proxy feed not configured",{status:"401"}):caches$2.match(e).then(t=>{const r=getProxyUrl$1(e);return fetch$2(r,getProxyHeaders$1(e)).then(t=>{if(t.ok)return caches$2.open("data").then(r=>r?r.put(e,t.clone()):void 0).then(e=>t)})}).catch(e=>{throw console.log("Proxy Fetch Error",e),e}))},handler$1=proxyHandler,all=(e,t,r)=>{const n=loadData$1(`${t.dataPath}config.json`).then(e=>e.json()),a=new ConcatStream,s=fetchCachedFeedData$1(n,r.item),o={styles:r.allStyle.then(t=>n.then(r=>t({config:r,nonce:e}))),data:r.column.then(e=>n.then(t=>s.then(r=>e({column:{config:{feedUrl:t.feedUrl,name:t.content.allTitle},items:r}})))),itemTemplate:r.item.then(e=>e({options:{includeAuthor:!0,new:!0},item:{}}))};return r.head.then(t=>t({config:n,streams:o,nonce:e})).then(e=>e.pipeTo(a.writable)),Promise.resolve(new Response$2(a.readable,{status:"200"}))},fetchCachedFeedData$1=(e,t)=>{const r={includeAuthor:!0};return caches$2.open("data").then(t=>e.then(e=>((e,t)=>e?e.match(new Request$2(t)).then(e=>e?e.text():void 0):Promise.resolve())(t,`${e.origin}/proxy?url=${encodeURIComponent(e.feedUrl)}`))).then(e=>{return convertFeedItemsToJSON(e)}).then(e=>t.then(t=>t({options:r,items:e})))},handler$2=all;var WorkboxSW=function(){class e{constructor(e){this._errors=e}createError(e,t){if(!(e in this._errors))throw new Error(`Unable to generate error '${e}'.`);let r=this._errors[e].replace(/\s+/g," "),n=null;t&&(r+=` [${t.message}]`,n=t.stack);const a=new Error;return a.name=e,a.message=r,a.stack=n,a}}var t=new e({"not-in-sw":"workbox-sw must be loaded in your service worker file.","unsupported-route-type":"The first parameter to registerRoute() should be either an Express-style path string, a RegExp, or a function.","empty-express-string":"The Express style route string must have some characters, an empty string is invalid.","bad-revisioned-cache-list":"The 'precache()' method expectsan array of revisioned urls like so: ['/example/hello.1234.txt', {path: 'hello.txt', revision: '1234'}]","navigation-route-url-string":"The registerNavigationRoute() method expects a URL string as its first parameter.","bad-cache-id":"The 'cacheId' parameter must be a string with at least one character","bad-skip-waiting":"The 'skipWaiting' parameter must be a boolean.","bad-clients-claim":"The 'clientsClaim' parameter must be a boolean.","bad-directory-index":"The 'directoryIndex' parameter must be a boolean."});var r=new e({"express-route-invalid-path":"When using ExpressRoute, you must\n    provide a path that starts with a '/' character (to match same-origin\n    requests) or that starts with 'http' (to match cross-origin requests)"}),n={parse:()=>[]};function a(e){const t=Object.keys(e);t.some(t=>void 0!==e[t])||l("Please set at least one of the following parameters: "+t.map(e=>`'${e}'`).join(", "))}function s(e,t){const r=Object.keys(e).pop();e[r]instanceof t||l(`The '${r}' parameter must be an instance of\n      '${t.name}'`)}function o(e,t){const r=Object.keys(e).pop(),n=typeof e[r];n!==t&&l(`The '${r}' parameter has the wrong type. (Expected:\n      ${t}, actual: ${n})`)}function i(e,t){const r=Object.keys(e).pop(),n=`The '${r}' parameter should be an array containing\n    one or more '${t}' elements.`;Array.isArray(e[r])||l(n);for(let a of e[r])typeof a!==t&&l(n)}function c(e,t){const r=Object.keys(e).pop(),n=`The '${r}' parameter should be an array containing\n    one or more '${t.name}' instances.`;Array.isArray(e[r])||l(n);for(let a of e[r])a instanceof t||l(n)}function l(e){e=e.replace(/\s+/g," ");const t=new Error(e);t.name="assertion-failed";const r=n.parse(t);throw 3<=r.length&&(t.message=`Invalid call to ${r[2].functionName}() — `+e),t}function h(e){return"object"==typeof e?(function(e,t){const r=Object.keys(e).pop();"function"!=typeof e[r][t]&&l(`The '${r}' parameter must be an object that exposes a\n      '${t}' method.`)}({handler:e},"handle"),e):(o({handler:e},"function"),{handle:e})}const u="GET",d=["DELETE","GET","HEAD","POST","PUT"];class p{constructor({match:e,handler:t,method:r}={}){this.handler=h(t),o({match:e},"function"),this.match=e,r?(function(e,t){const r=Object.keys(e).pop();t.includes(e[r])||l(`The '${r}' parameter must be set to one of the\n      following: ${t}`)}({method:r},d),this.method=r):this.method=u}}var m=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)},f=A,g=v,E=function(e,t){return b(v(e,t))},N=b,_=S,w=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function v(e,t){for(var r,n=[],a=0,s=0,o="",i=t&&t.delimiter||"/";null!=(r=w.exec(e));){var c=r[0],l=r[1],h=r.index;if(o+=e.slice(s,h),s=h+c.length,l)o+=l[1];else{var u=e[s],d=r[2],p=r[3],m=r[4],f=r[5],g=r[6],E=r[7];o&&(n.push(o),o="");var N=r[2]||i,_=m||f;n.push({name:p||a++,prefix:d||"",delimiter:N,optional:"?"===g||"*"===g,repeat:"+"===g||"*"===g,partial:null!=d&&null!=u&&u!==d,asterisk:!!E,pattern:_?C(_):E?".*":"[^"+x(N)+"]+?"})}}return s<e.length&&(o+=e.substr(s)),o&&n.push(o),n}function T(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function y(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function b(e){for(var t=Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var a,s="",o=r||{},i=(n||{}).pretty?T:encodeURIComponent,c=0;c<e.length;c++)if("string"!=typeof(a=e[c])){var l,h=o[a.name];if(null==h){if(a.optional){a.partial&&(s+=a.prefix);continue}throw new TypeError('Expected "'+a.name+'" to be defined')}if(m(h)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var u=0;u<h.length;u++){if(l=i(h[u]),!t[c].test(l))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'", but received `'+JSON.stringify(l)+"`");s+=(0===u?a.prefix:a.delimiter)+l}}else{if(l=a.asterisk?y(h):i(h),!t[c].test(l))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but received "'+l+'"');s+=a.prefix+l}}else s+=a;return s}}function x(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function C(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function D(e,t){return e.keys=t,e}function R(e){return e.sensitive?"":"i"}function S(e,t,r){m(t)||(r=t||r,t=[]);for(var n,a=(r=r||{}).strict,s=!1!==r.end,o="",i=0;i<e.length;i++)if("string"==typeof(n=e[i]))o+=x(n);else{var c=x(n.prefix),l="(?:"+n.pattern+")";t.push(n),n.repeat&&(l+="(?:"+c+l+")*"),o+=l=n.optional?n.partial?c+"("+l+")?":"(?:"+c+"("+l+"))?":c+"("+l+")"}var h=x(r.delimiter||"/"),u=o.slice(-h.length)===h;return a||(o=(u?o.slice(0,-h.length):o)+"(?:"+h+"(?=$))?"),o+=s?"$":a&&u?"":"(?="+h+"|$)",D(new RegExp("^"+o,R(r)),t)}function A(e,t,r){return m(t)||(r=t||r,t=[]),r=r||{},e instanceof RegExp?function(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return D(e,t)}(e,t):m(e)?function(e,t,r){for(var n=[],a=0;a<e.length;a++)n.push(A(e[a],t,r).source);return D(new RegExp("(?:"+n.join("|")+")",R(r)),t)}(e,t,r):function(e,t,r){return S(v(e,r),t,r)}(e,t,r)}f.parse=g,f.compile=E,f.tokensToFunction=N,f.tokensToRegExp=_;class O extends p{constructor({path:e,handler:t,method:n}){if(!e.startsWith("/")&&!e.startsWith("http"))throw r.createError("express-route-invalid-path");let a=[];const s=f(e,a);super({match:({url:t})=>{if(e.startsWith("/")&&t.origin!==location.origin)return null;const r=(e.startsWith("/")?t.pathname:t.href).match(s);if(!r)return null;const n={};return a.forEach((e,t)=>{n[e.name]=r[t+1]}),n},handler:t,method:n})}}class I{constructor(){this._logs=[],this._childGroups=[],this._isFallbackMode=!1;const e=/Firefox\/(\d*)\.\d*/.exec(navigator.userAgent);if(e)try{55>parseInt(e[1],10)&&(this._isFallbackMode=!0)}catch(e){this._isFallbackMode=!0}/Edge\/\d*\.\d*/.exec(navigator.userAgent)&&(this._isFallbackMode=!0)}addPrimaryLog(e){this._primaryLog=e}addLog(e){this._logs.push(e)}addChildGroup(e){0===e._logs.length||this._childGroups.push(e)}print(){return 0===this._logs.length&&0===this._childGroups.length?void this._printLogDetails(this._primaryLog):(this._primaryLog&&(this._isFallbackMode?this._printLogDetails(this._primaryLog):console.groupCollapsed(...this._getLogContent(this._primaryLog))),this._logs.forEach(e=>{this._printLogDetails(e)}),this._childGroups.forEach(e=>{e.print()}),void(this._primaryLog&&!this._isFallbackMode&&console.groupEnd()))}_printLogDetails(e){(e.logFunc?e.logFunc:console.log)(...this._getLogContent(e))}_getLogContent(e){let t=e.message;this._isFallbackMode&&"string"==typeof t&&(t=t.replace(/%c/g,""));let r=[t];return!this._isFallbackMode&&e.colors&&(r=r.concat(e.colors)),e.args&&(r=r.concat(e.args)),r}}function P(){return"ServiceWorkerGlobalScope"in self&&self instanceof ServiceWorkerGlobalScope}self.workbox=self.workbox||{},self.workbox.LOG_LEVEL=self.workbox.LOG_LEVEL||{none:-1,verbose:0,debug:1,warn:2,error:3};const M="#bdc3c7",L="#7f8c8d",U="#2ecc71",$="#f1c40f",q="#e74c3c",k="#3498db";var F=new class{constructor(){this._defaultLogLevel=self.workbox.LOG_LEVEL.warn}log(e){this._printMessage(self.workbox.LOG_LEVEL.verbose,e)}debug(e){this._printMessage(self.workbox.LOG_LEVEL.debug,e)}warn(e){this._printMessage(self.workbox.LOG_LEVEL.warn,e)}error(e){this._printMessage(self.workbox.LOG_LEVEL.error,e)}_printMessage(e,t){this._shouldLogMessage(e,t)&&this._getAllLogGroups(e,t).print()}_getAllLogGroups(e,t){const r=new I,n=this._getPrimaryMessageDetails(e,t);if(r.addPrimaryLog(n),t.error){const e={message:t.error,logFunc:console.error};r.addLog(e)}const a=new I;if(t.that&&t.that.constructor&&t.that.constructor.name){const e=t.that.constructor.name;a.addLog(this._getKeyValueDetails("class",e))}return t.data&&("object"!=typeof t.data||t.data instanceof Array?a.addLog(this._getKeyValueDetails("additionalData",t.data)):Object.keys(t.data).forEach(e=>{a.addLog(this._getKeyValueDetails(e,t.data[e]))})),r.addChildGroup(a),r}_getKeyValueDetails(e,t){return{message:`%c${e}: `,colors:[`color: ${k}`],args:t}}_getPrimaryMessageDetails(e,t){let r,n;e===self.workbox.LOG_LEVEL.verbose?(r="Info",n=M):e===self.workbox.LOG_LEVEL.debug?(r="Debug",n=U):e===self.workbox.LOG_LEVEL.warn?(r="Warn",n=$):e===self.workbox.LOG_LEVEL.error&&(r="Error",n=q);let a=`%c🔧 %c[${r}]`;const s=[`color: ${M}`,`color: ${n}`];let o;return"string"==typeof t?o=t:t.message&&(o=t.message),o&&(a+=`%c ${o=o.replace(/\s+/g," ")}`,s.push(`color: ${L}; font-weight: normal`)),{message:a,colors:s}}_shouldLogMessage(e,t){if(!t)return!1;let r=this._defaultLogLevel;return self&&self.workbox&&"number"==typeof self.workbox.logLevel&&(r=self.workbox.logLevel),!(r===self.workbox.LOG_LEVEL.none||e<r)}};class W extends p{constructor({whitelist:e,blacklist:t,handler:r}={}){c({whitelist:e},RegExp),t?c({blacklist:t},RegExp):t=[],super({match:({event:n,url:a})=>{let s,o=!1;if("navigate"===n.request.mode){const n=a.pathname+a.search;e.some(e=>e.test(n))?t.some(e=>e.test(n))?s="The navigation route is not being used, since the request URL matches both the whitelist and blacklist.":(s="The navigation route is being used.",o=!0):s="The navigation route is not being used, since the URL being navigated to doesn't match the whitelist.",F.debug({that:this,message:s,data:{"request-url":a.href,whitelist:e,blacklist:t,handler:r}})}return o},handler:r,method:"GET"})}}class j extends p{constructor({regExp:e,handler:t,method:r}){s({regExp:e},RegExp),super({match:({url:t})=>{const r=e.exec(t.href);return r?t.origin!==location.origin&&0!==r.index?(F.debug({that:this,message:"Skipping route, because the RegExp match didn't occur at the start of the URL.",data:{url:t.href,regExp:e}}),null):r.slice(1):null},handler:t,method:r})}}class B{constructor({handleFetch:e}={}){void 0===e&&(e=!0),this._routes=new Map,e&&this._addFetchListener()}_addFetchListener(){self.addEventListener("fetch",e=>{const t=new URL(e.request.url);if(!t.protocol.startsWith("http"))return void F.log({that:this,message:"URL does not start with HTTP and so not passing through the router.",data:{request:e.request}});let r,n;for(let a of this._routes.get(e.request.method)||[]){const s=a.match({url:t,event:e});if(s){n=a,F.log({that:this,message:"The router found a matching route.",data:{route:n,request:e.request}});let o=s;Array.isArray(o)&&0===o.length?o=void 0:o.constructor===Object&&0===Object.keys(o).length&&(o=void 0),r=a.handler.handle({url:t,event:e,params:o});break}}!r&&this.defaultHandler&&(r=this.defaultHandler.handle({url:t,event:e})),r&&this.catchHandler&&(r=r.catch(r=>this.catchHandler.handle({url:t,event:e,error:r}))),r&&e.respondWith(r.then(t=>(F.debug({that:this,message:"The router is managing a route with a response.",data:{route:n,request:e.request,response:t}}),t)))})}setDefaultHandler({handler:e}={}){this.defaultHandler=h(e)}setCatchHandler({handler:e}={}){this.catchHandler=h(e)}registerRoutes({routes:e}={}){c({routes:e},p);for(let t of e)this._routes.has(t.method)||this._routes.set(t.method,[]),this._routes.get(t.method).unshift(t)}registerRoute({route:e}={}){s({route:e},p),this.registerRoutes({routes:[e]})}unregisterRoutes({routes:e}={}){c({routes:e},p);for(let t of e){this._routes.has(t.method)||F.error({that:this,message:`Can't unregister route; there are no ${t.method}\n            routes registered.`,data:{route:t}});const e=this._routes.get(t.method).indexOf(t);-1<e?this._routes.get(t.method).splice(e,1):F.error({that:this,message:"Can't unregister route; the route wasn't previously\n            registered.",data:{route:t}})}}unregisterRoute({route:e}={}){s({route:e},p),this.unregisterRoutes({routes:[e]})}}class G extends B{constructor(e,t){super({handleFetch:t}),this._revisionedCacheName=e}registerRoute(e,r,n="GET"){let a;if("function"==typeof r&&(r={handle:r}),"string"==typeof e){if(0===e.length)throw t.createError("empty-express-string");a=new O({path:e,handler:r,method:n})}else if(e instanceof RegExp)a=new j({regExp:e,handler:r,method:n});else{if("function"!=typeof e)throw t.createError("unsupported-route-type");a=new p({match:e,handler:r,method:n})}return super.registerRoute({route:a}),a}registerNavigationRoute(e,r={}){if("string"!=typeof e)throw t.createError("navigation-route-url-string");const n="cacheName"in r?r.cacheName:this._revisionedCacheName;super.registerRoute({route:new W({handler:()=>caches.match(e,{cacheName:n}),whitelist:r.whitelist||[/./],blacklist:r.blacklist||[]})})}}var H=new e({"multiple-cache-will-update-plugins":"You cannot register more than one plugin that implements cacheWillUpdate.","multiple-cache-will-match-plugins":"You cannot register more than one plugin that implements cacheWillMatch.","invalid-response-for-caching":"The fetched response could not be cached due to an invalid response code.","no-response-received":"No response received; falling back to cache.","bad-cache-id":"The 'cacheId' parameter must be a string with at least one character."});class V{constructor({statuses:e,headers:t}={}){a({statuses:e,headers:t}),void 0!==e&&i({statuses:e},"number"),void 0!==t&&o({headers:t},"object"),this.statuses=e,this.headers=t}isResponseCacheable({request:e,response:t}={}){s({response:t},Response);let r=!0;if(this.statuses&&(r=this.statuses.includes(t.status)),this.headers&&r&&(r=Object.keys(this.headers).some(e=>t.headers.get(e)===this.headers[e])),!r){const r={response:t};this.statuses&&(r["valid-status-codes"]=JSON.stringify(this.statuses)),this.headers&&(r["valid-headers"]=JSON.stringify(this.headers)),e&&(r.request=e),F.debug({message:"The response does not meet the criteria for being added to the\n          cache.",data:r})}return r}}class z extends V{cacheWillUpdate({request:e,response:t}={}){return this.isResponseCacheable({request:e,response:t})}}const Y=({cacheId:e}={})=>{let t="workbox-runtime-caching";return e&&(t=`${e}-${t}`),self&&self.registration&&(t+=`-${self.registration.scope}`),t},K=["cacheDidUpdate","cacheWillMatch","cacheWillUpdate","fetchDidFail","requestWillFetch"];var Q=({response:e})=>{s({response:e},Response);const t=e.clone();return("body"in t?Promise.resolve(t.body):t.blob()).then(e=>new Response(e,{headers:t.headers,status:t.status,statusText:t.statusText}))};class X{constructor({cacheName:e,cacheId:t,plugins:r,fetchOptions:n,matchOptions:a}={}){if(t&&("string"!=typeof t||0===t.length))throw H.createError("bad-cache-id");e?(o({cacheName:e},"string"),this.cacheName=e,t&&(this.cacheName=`${t}-${this.cacheName}`)):this.cacheName=Y({cacheId:t}),n&&(o({fetchOptions:n},"object"),this.fetchOptions=n),a&&(o({matchOptions:a},"object"),this.matchOptions=a),this.plugins=new Map,r&&(i({plugins:r},"object"),r.forEach(e=>{for(let t of K)if("function"==typeof e[t]){if(this.plugins.has(t)){if("cacheWillUpdate"===t)throw H.createError("multiple-cache-will-update-plugins");if("cacheWillMatch"===t)throw H.createError("multiple-cache-will-match-plugins")}else this.plugins.set(t,[]);this.plugins.get(t).push(e)}})),this.plugins.has("cacheWillUpdate")&&(this._userSpecifiedCachableResponsePlugin=this.plugins.get("cacheWillUpdate")[0])}getDefaultCacheableResponsePlugin(){return this._defaultCacheableResponsePlugin||(this._defaultCacheableResponsePlugin=new z({statuses:[200]})),this._defaultCacheableResponsePlugin}async getCache(){return this._cache||(this._cache=await caches.open(this.cacheName)),this._cache}async match({request:e}){a({request:e});const t=await this.getCache();let r=await t.match(e,this.matchOptions);if(this.plugins.has("cacheWillMatch")){r=this.plugins.get("cacheWillMatch")[0].cacheWillMatch({request:e,cache:t,cachedResponse:r,matchOptions:this.matchOptions,cacheName:this.cacheName})}return r}async fetch({request:e}){"string"==typeof e?e=new Request(e):s({request:e},Request);const t=this.plugins.has("fetchDidFail")?e.clone():null;if(this.plugins.has("requestWillFetch"))for(let t of this.plugins.get("requestWillFetch")){const r=t.requestWillFetch({request:e});s({returnedPromise:r},Promise);const n=await r;s({returnedRequest:n},Request),e=n}try{return await fetch(e,this.fetchOptions)}catch(e){if(this.plugins.has("fetchDidFail"))for(let e of this.plugins.get("fetchDidFail"))e.fetchDidFail({request:t.clone()});throw e}}async fetchAndCache({request:e,waitOnCache:t,cacheKey:r,cacheResponsePlugin:n,cleanRedirects:s}){let o;a({request:e});const i=await this.fetch({request:e}),c=(this._userSpecifiedCachableResponsePlugin||n||this.getDefaultCacheableResponsePlugin()).cacheWillUpdate({request:e,response:i});if(c){const t=s&&i.redirected?await Q({response:i}):i.clone();o=this.getCache().then(async n=>{let a;const s=r||e;if("opaque"!==i.type&&this.plugins.has("cacheDidUpdate")&&(a=await this.match({request:s})),await n.put(s,t),this.plugins.has("cacheDidUpdate"))for(let e of this.plugins.get("cacheDidUpdate"))await e.cacheDidUpdate({cacheName:this.cacheName,oldResponse:a,newResponse:t,url:"url"in s?s.url:s})})}else if(!c&&t)throw H.createError("invalid-response-for-caching");return t&&o&&await o,i}}class J{constructor({requestWrapper:e,waitOnCache:t}={}){this.requestWrapper=e||new X,this.waitOnCache=!!t}handle({event:e,params:t}={}){throw Error("This abstract method must be implemented in a subclass.")}}class Z extends J{async handle({event:e}={}){return s({event:e},FetchEvent),await this.requestWrapper.match({request:e.request})||await this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache})}}class ee extends J{async handle({event:e}={}){return s({event:e},FetchEvent),await this.requestWrapper.match({request:e.request})}}class te extends J{constructor(e={}){super(e),this._cacheablePlugin=new z({statuses:[0,200]});const{networkTimeoutSeconds:t}=e;t&&(o({networkTimeoutSeconds:t},"number"),this.networkTimeoutSeconds=t)}async handle({event:e}={}){s({event:e},FetchEvent);const t=[];let r;this.networkTimeoutSeconds&&t.push(new Promise(t=>{r=setTimeout(()=>{t(this.requestWrapper.match({request:e.request}))},1e3*this.networkTimeoutSeconds)}));const n=this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache,cacheResponsePlugin:this._cacheablePlugin}).then(e=>(r&&clearTimeout(r),e||Promise.reject(H.createError("no-response-received")))).catch(()=>this.requestWrapper.match({request:e.request}));return t.push(n),Promise.race(t)}}class re extends J{async handle({event:e}={}){return s({event:e},FetchEvent),await this.requestWrapper.fetch({request:e.request})}}class ne extends J{constructor(e={}){super(e),this._cacheablePlugin=new z({statuses:[0,200]})}async handle({event:e}={}){s({event:e},FetchEvent);const t=this.requestWrapper.fetchAndCache({request:e.request,waitOnCache:this.waitOnCache,cacheResponsePlugin:this._cacheablePlugin}).catch(()=>Response.error());return await this.requestWrapper.match({request:e.request})||await t}}let ae="workbox-cache-expiration";self&&self.registration&&(ae+=`-${self.registration.scope}`);const se=ae,oe=1,ie="url",ce="timestamp";var le,he=(function(e){!function(){function t(e){return new Promise(function(t,r){e.onsuccess=function(){t(e.result)},e.onerror=function(){r(e.error)}})}function r(e,r,n){var a,s=new Promise(function(s,o){t(a=e[r].apply(e,n)).then(s,o)});return s.request=a,s}function n(e,t,r){r.forEach(function(r){Object.defineProperty(e.prototype,r,{get:function(){return this[t][r]},set:function(e){this[t][r]=e}})})}function a(e,t,n,a){a.forEach(function(a){a in n.prototype&&(e.prototype[a]=function(){return r(this[t],a,arguments)})})}function s(e,t,r,n){n.forEach(function(n){n in r.prototype&&(e.prototype[n]=function(){return this[t][n].apply(this[t],arguments)})})}function o(e,t,n,a){a.forEach(function(a){a in n.prototype&&(e.prototype[a]=function(){return function(e,t,n){var a=r(e,t,n);return a.then(function(e){return e?new c(e,a.request):void 0})}(this[t],a,arguments)})})}function i(e){this._index=e}function c(e,t){this._cursor=e,this._request=t}function l(e){this._store=e}function h(e){this._tx=e,this.complete=new Promise(function(t,r){e.oncomplete=function(){t()},e.onerror=function(){r(e.error)},e.onabort=function(){r(e.error)}})}function u(e,t,r){this._db=e,this.oldVersion=t,this.transaction=new h(r)}function d(e){this._db=e}n(i,"_index",["name","keyPath","multiEntry","unique"]),a(i,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),o(i,"_index",IDBIndex,["openCursor","openKeyCursor"]),n(c,"_cursor",["direction","key","primaryKey","value"]),a(c,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(e){e in IDBCursor.prototype&&(c.prototype[e]=function(){var r=this,n=arguments;return Promise.resolve().then(function(){return r._cursor[e].apply(r._cursor,n),t(r._request).then(function(e){return e?new c(e,r._request):void 0})})})}),l.prototype.createIndex=function(){return new i(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new i(this._store.index.apply(this._store,arguments))},n(l,"_store",["name","keyPath","indexNames","autoIncrement"]),a(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),o(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),s(l,"_store",IDBObjectStore,["deleteIndex"]),h.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},n(h,"_tx",["objectStoreNames","mode"]),s(h,"_tx",IDBTransaction,["abort"]),u.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},n(u,"_db",["name","version","objectStoreNames"]),s(u,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new h(this._db.transaction.apply(this._db,arguments))},n(d,"_db",["name","version","objectStoreNames"]),s(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(e){[l,i].forEach(function(t){t.prototype[e.replace("open","iterate")]=function(){var t=function(e){return Array.prototype.slice.call(e)}(arguments),r=t[t.length-1],n=this._store||this._index,a=n[e].apply(n,t.slice(0,-1));a.onsuccess=function(){r(a.result)}}})}),[i,l].forEach(function(e){e.prototype.getAll||(e.prototype.getAll=function(e,t){var r=this,n=[];return new Promise(function(a){r.iterateCursor(e,function(e){return e?(n.push(e.value),void 0!==t&&n.length==t?void a(n):void e.continue()):void a(n)})})})});var p={open:function(e,t,n){var a=r(indexedDB,"open",[e,t]),s=a.request;return s.onupgradeneeded=function(e){n&&n(new u(s.result,e.oldVersion,s.transaction))},a.then(function(e){return new d(e)})},delete:function(e){return r(indexedDB,"deleteDatabase",[e])}};e.exports=p,e.exports.default=e.exports}()}(le={exports:{}},le.exports),le.exports);var ue=new e({"max-entries-or-age-required":"Either the maxEntries or maxAgeSeconds\n    parameters (or both) are required when constructing Plugin.","max-entries-must-be-number":"The maxEntries parameter to the Plugin\n    constructor must either be a number or undefined.","max-age-seconds-must-be-number":"The maxAgeSeconds parameter to the Plugin\n    constructor must either be a number or undefined."});class de{constructor({maxEntries:e,maxAgeSeconds:t}={}){if(!e&&!t)throw ue.createError("max-entries-or-age-required");if(e&&"number"!=typeof e)throw ue.createError("max-entries-must-be-number");if(t&&"number"!=typeof t)throw ue.createError("max-age-seconds-must-be-number");this.maxEntries=e,this.maxAgeSeconds=t,this._dbs=new Map,this._caches=new Map,this._expirationMutex=!1,this._timestampForNextRun=null}async getDB({cacheName:e}={}){o({cacheName:e},"string");const t=`${se}-${e}`;if(!this._dbs.has(t)){const r=await he.open(t,oe,t=>{t.createObjectStore(e,{keyPath:ie}).createIndex(ce,ce,{unique:!1})});this._dbs.set(t,r)}return this._dbs.get(t)}async getCache({cacheName:e}={}){if(o({cacheName:e},"string"),!this._caches.has(e)){const t=await caches.open(e);this._caches.set(e,t)}return this._caches.get(e)}isResponseFresh({cacheName:e,cachedResponse:t,now:r}={}){if(t&&this.maxAgeSeconds){s({cachedResponse:t},Response);const n=t.headers.get("date");if(n){void 0===r&&(r=Date.now());const e=new Date(n).getTime();return!!isNaN(e)||e+1e3*this.maxAgeSeconds>r}return this.expireEntries({cacheName:e,now:r}),!0}return!0}async updateTimestamp({cacheName:e,url:t,now:r}={}){o({url:t},"string"),o({cacheName:e},"string");const n=new URL(t,location);n.hash="",void 0===r&&(r=Date.now());const a=(await this.getDB({cacheName:e})).transaction(e,"readwrite");a.objectStore(e).put({[ce]:r,[ie]:n.href}),await a.complete}async expireEntries({cacheName:e,now:t}={}){if(this._expirationMutex)return void(this._timestampForNextRun=t);this._expirationMutex=!0,o({cacheName:e},"string"),void 0===t&&(t=Date.now());const r=this.maxAgeSeconds?await this.findOldEntries({cacheName:e,now:t}):[],n=this.maxEntries?await this.findExtraEntries({cacheName:e}):[],a=[...new Set(r.concat(n))];if(await this.deleteFromCacheAndIDB({cacheName:e,urls:a}),0<a.length&&F.debug({that:this,message:"Expired entries have been removed from the cache.",data:{cacheName:e,urls:a}}),this._expirationMutex=!1,this._timestampForNextRun){const t=this._timestampForNextRun;return this._timestampForNextRun=null,this.expireEntries({cacheName:e,now:t})}}async findOldEntries({cacheName:e,now:t}={}){o({cacheName:e},"string"),o({now:t},"number");const r=t-1e3*this.maxAgeSeconds,n=[],a=(await this.getDB({cacheName:e})).transaction(e,"readonly");return a.objectStore(e).index(ce).iterateCursor(e=>{e&&(e.value[ce]<r&&n.push(e.value[ie]),e.continue())}),await a.complete,n}async findExtraEntries({cacheName:e}={}){o({cacheName:e},"string");const t=[],r=await this.getDB({cacheName:e});let n=r.transaction(e,"readonly"),a=n.objectStore(e),s=a.index(ce);const i=await s.count();return i>this.maxEntries&&(s=(a=(n=r.transaction(e,"readonly")).objectStore(e)).index(ce)).iterateCursor(e=>{e&&(t.push(e.value[ie]),i-t.length>this.maxEntries&&e.continue())}),await n.complete,t}async deleteFromCacheAndIDB({cacheName:e,urls:t}={}){if(o({cacheName:e},"string"),i({urls:t},"string"),0<t.length){const r=await this.getCache({cacheName:e}),n=await this.getDB({cacheName:e});for(let a of t){await r.delete(a);const t=n.transaction(e,"readwrite");t.objectStore(e).delete(a),await t.complete}}}}class pe extends de{cacheWillMatch({cacheName:e,cachedResponse:t,now:r}={}){return this.isResponseFresh({cacheName:e,cachedResponse:t,now:r})?t:null}async cacheDidUpdate({cacheName:e,newResponse:t,url:r,now:n}={}){o({cacheName:e},"string"),s({newResponse:t},Response),void 0===n&&(n=Date.now()),await this.updateTimestamp({cacheName:e,url:r,now:n}),await this.expireEntries({cacheName:e,now:n})}}var me=new e({"channel-name-required":"The channelName parameter is required when\n    constructing a new BroadcastCacheUpdate instance.","responses-are-same-parameters-required":"The first, second, and\n    headersToCheck parameters must be valid when calling responsesAreSame()"});const fe="CACHE_UPDATED",ge=["content-length","etag","last-modified"],Ee="workbox-broadcast-cache-update";class Ne{constructor({channelName:e,headersToCheck:t,source:r}={}){if("string"!=typeof e||0===e.length)throw me.createError("channel-name-required");this.channelName=e,this.headersToCheck=t||ge,this.source=r||Ee}get channel(){return this._channel||(this._channel=new BroadcastChannel(this.channelName)),this._channel}notifyIfUpdated({first:e,second:t,cacheName:r,url:n}){o({cacheName:r},"string"),function({first:e,second:t,headersToCheck:r}={}){if(!(e instanceof Response&&t instanceof Response&&r instanceof Array))throw me.createError("responses-are-same-parameters-required");return r.some(r=>e.headers.has(r)&&t.headers.has(r))?r.every(r=>e.headers.has(r)===t.headers.has(r)&&e.headers.get(r)===t.headers.get(r)):(F.log({message:"Unable to determine whether the response has been updated\n        because none of the headers that would be checked are present.",data:{"First Response":e,"Second Response":t,"Headers To Check":JSON.stringify(r)}}),!0)}({first:e,second:t,headersToCheck:this.headersToCheck})||function({channel:e,cacheName:t,url:r,source:n}={}){s({channel:e},BroadcastChannel),o({cacheName:t},"string"),o({source:n},"string"),o({url:r},"string"),e.postMessage({type:fe,meta:n,payload:{cacheName:t,updatedUrl:r}})}({cacheName:r,url:n,channel:this.channel,source:this.source})}}class _e extends Ne{cacheDidUpdate({cacheName:e,oldResponse:t,newResponse:r,url:n}){o({cacheName:e},"string"),s({newResponse:r},Response),t&&this.notifyIfUpdated({cacheName:e,first:t,second:r,url:n})}}class we{constructor({cacheId:e}={}){this._cacheId=e}cacheFirst(e){return this._getCachingMechanism(Z,e)}cacheOnly(e){return this._getCachingMechanism(ee,e)}networkFirst(e){return this._getCachingMechanism(te,e)}networkOnly(e){return this._getCachingMechanism(re,e)}staleWhileRevalidate(e){return this._getCachingMechanism(ne,e)}_getCachingMechanism(e,t={}){const r={cacheExpiration:pe,broadcastCacheUpdate:_e,cacheableResponse:z},n={plugins:[]};return t.excludeCacheId||(n.cacheId=this._cacheId),t.cacheName&&(n.cacheName=t.cacheName),Object.keys(r).forEach(e=>{if(t[e]){const a=r[e],s=t[e];n.plugins.push(new a(s))}}),t.plugins&&t.plugins.forEach(e=>{n.plugins.push(e)}),t.requestWrapper=new X(n),new e(t)}}const ve=(e,t)=>{let r="An error was thrown by workbox with error code: "+`;'${e}'`;return t&&(r+=` with extras: '${JSON.stringify(t)}'`),r};class Te extends Error{constructor(e,t){super(),this.name=e,this.message=ve(e,t),t&&(this.extras=t)}}class ye{constructor({cacheName:e,cacheId:t,plugins:r}={}){if(t&&("string"!=typeof t||0===t.length))throw new Te("bad-cache-id",{cacheId:t});this._entriesToCache=new Map,this._requestWrapper=new X({cacheName:e,cacheId:t,plugins:r,fetchOptions:{credentials:"same-origin"}})}_addEntries(e){this._parsedCacheUrls=null,e.forEach(e=>{this._addEntryToInstallList(this._parseEntry(e))})}getCacheName(){return this._requestWrapper.cacheName}getCachedUrls(){return this._parsedCacheUrls||(this._parsedCacheUrls=Array.from(this._entriesToCache.keys()).map(e=>new URL(e,location).href)),this._parsedCacheUrls}_addEntryToInstallList(e){const t=e.entryID,r=this._entriesToCache.get(e.entryID);return r?void this._onDuplicateInstallEntryFound(e,r):void this._entriesToCache.set(t,e)}async install(){if(0===this._entriesToCache.size)return[];const e=[];return this._entriesToCache.forEach(t=>{e.push(this._cacheEntry(t))}),Promise.all(e)}async _cacheEntry(e){const t=await this._isAlreadyCached(e),r={url:e.request.url,revision:e.revision,wasUpdated:!t};if(t)return r;try{return await this._requestWrapper.fetchAndCache({request:e.getNetworkRequest(),waitOnCache:!0,cacheKey:e.request,cleanRedirects:!0}),await this._onEntryCached(e),r}catch(t){throw new Te("request-not-cached",{url:e.request.url,error:t})}}async cleanup(){if(!await caches.has(this.getCacheName()))return;const e=[];this._entriesToCache.forEach(t=>{e.push(t.request.url)});const t=await this._getCache(),r=(await t.keys()).filter(t=>!e.includes(t.url));return Promise.all(r.map(async e=>{await t.delete(e),await this._onEntryDeleted(e.url)}))}async _getCache(){return this._cache||(this._cache=await caches.open(this.getCacheName())),this._cache}_parseEntry(){throw new Te("requires-overriding")}_onDuplicateEntryFound(){throw new Te("requires-overriding")}_isAlreadyCached(){throw new Te("requires-overriding")}_onEntryCached(){throw new Te("requires-overriding")}_onEntryDeleted(){throw new Te("requires-overriding")}}class be{constructor(e,t,r){if(null==e||null==t||null==r)throw Error("name, version, storeName must be passed to the constructor.");this._name=e,this._version=t,this._storeName=r}_getDb(){return this._dbPromise?this._dbPromise:(this._dbPromise=he.open(this._name,this._version,e=>{e.createObjectStore(this._storeName)}).then(e=>e),this._dbPromise)}close(){return this._dbPromise?this._dbPromise.then(e=>{e.close(),this._dbPromise=null}):void 0}put(e,t){return this._getDb().then(r=>{const n=r.transaction(this._storeName,"readwrite");return n.objectStore(this._storeName).put(t,e),n.complete})}delete(e){return this._getDb().then(t=>{const r=t.transaction(this._storeName,"readwrite");return r.objectStore(this._storeName).delete(e),r.complete})}get(e){return this._getDb().then(t=>t.transaction(this._storeName).objectStore(this._storeName).get(e))}getAllValues(){return this._getDb().then(e=>e.transaction(this._storeName).objectStore(this._storeName).getAll())}getAllKeys(){return this._getDb().then(e=>e.transaction(this._storeName).objectStore(this._storeName).getAllKeys())}}const xe="_workbox-precaching",Ce="workbox-precaching",De="1",Re="asset-revisions";let Se="workbox-precaching-revisioned-v1";self&&self.registration&&(Se+=`-${self.registration.scope}`);const Ae=Se;class Oe{constructor(){this._idbHelper=new be(Ce,De,Re)}get(e){return this._idbHelper.get(e)}put(e,t){return this._idbHelper.put(e,t)}delete(e){return this._idbHelper.delete(e)}_close(){this._idbHelper.close()}}class Ie{constructor({entryID:e,revision:t,request:r,cacheBust:n}){this.entryID=e,this.revision=t,this.request=r,this.cacheBust=n}getNetworkRequest(){if(!0!==this.cacheBust)return this.request;let e=this.request.url;const t={};if(!0===this.cacheBust)if("cache"in Request.prototype)t.cache="reload";else{const t=new URL(e,location);t.search+=(t.search?"&":"")+encodeURIComponent(xe)+"="+encodeURIComponent(this.revision),e=t.toString()}return new Request(e,t)}}class Pe extends Ie{constructor(e){if(o({url:e},"string"),0===e.length)throw new Te("invalid-string-entry",{url:e});super({entryID:e,revision:e,request:new Request(e),cacheBust:!1})}}class Me extends Ie{constructor({entryID:e,revision:t,url:r,cacheBust:n}){if(void 0!==t&&(o({revision:t},"string"),0===t.length))throw new Te("invalid-object-entry",{problemParam:"revision",problemValue:t});if(void 0===n&&(n=!!t),o({cacheBust:n},"boolean"),o({url:r},"string"),0===r.length)throw new Te("invalid-object-entry",{problemParam:"url",problemValue:r});if(void 0===e)e=new URL(r,location).toString();else if(0===e.length)throw new Te("invalid-object-entry",{problemParam:"entryID",problemValue:e});super({entryID:e,revision:t||r,request:new Request(r),cacheBust:n})}}class Le extends ye{constructor(e={}){e.cacheName=e.cacheName||Ae,super(e),this._revisionDetailsModel=new Oe}addToCacheList({revisionedFiles:e}={}){s({revisionedFiles:e},Array),super._addEntries(e);const t=e.filter(e=>"string"==typeof e||!e.revision);0<t.length&&F.debug({that:this,message:"Some precache entries are URLs without separate revision\n          fields. If the URLs themselves do not contain revisioning info,\n          like a hash or a version number, your users won't receive updates.",data:{"URLs without revision fields":JSON.stringify(t),"Examples of safe, versioned URLs":"'/path/file.abcd1234.css' or '/v1.0.0/file.js'","Examples of dangerous, unversioned URLs":"'index.html' or '/path/file.css' or '/latest/file.js'"}})}_parseEntry(e){if(null===e)throw new Te("unexpected-precache-entry",{input:e});let t;switch(typeof e){case"string":t=new Pe(e);break;case"object":t=new Me(e);break;default:throw new Te("unexpected-precache-entry",{input:e})}return t}_onDuplicateInstallEntryFound(e,t){if(t.revision!==e.revision)throw new Te("duplicate-entry-diff-revisions",{firstEntry:{url:t.request.url,revision:t.revision},secondEntry:{url:e.request.url,revision:e.revision}})}async _isAlreadyCached(e){if(await this._revisionDetailsModel.get(e.entryID)!==e.revision)return!1;const t=await this._getCache();return!!await t.match(e.request)}async _onEntryCached(e){await this._revisionDetailsModel.put(e.entryID,e.revision)}async _onEntryDeleted(e){await this._revisionDetailsModel.delete(e)}_close(){this._revisionDetailsModel._close()}cleanup(){return super.cleanup().then(()=>this._close())}_createLogFriendlyString(e){let t="\n";return e.forEach(e=>{t+=`    URL: '${e.url}' Revision: `+`'${e.revision}'\n`}),t}install(){return super.install().then(e=>{const t=[],r=[];e.forEach(e=>{e.wasUpdated?t.push({url:e.url,revision:e.revision}):r.push({url:e.url,revision:e.revision})});const n={};return 0<t.length&&(n["New / Updated Precache URL's"]=this._createLogFriendlyString(t)),0<r.length&&(n["Up-to-date Precache URL's"]=this._createLogFriendlyString(r)),F.log({message:`Precache Details: ${t.length} requests `+"were added or updated and "+`${r.length} request are already `+"cached and up-to-date.",data:n}),e})}}if(!P())throw new Te("not-in-sw");return class{constructor({cacheId:e,skipWaiting:r,clientsClaim:n,handleFetch:a,directoryIndex:s="index.html",precacheChannelName:o="precache-updates",ignoreUrlParametersMatching:i=[/^utm_/]}={}){if(!P())throw t.createError("not-in-sw");if(e&&("string"!=typeof e||0===e.length))throw t.createError("bad-cache-id");if(r&&"boolean"!=typeof r)throw t.createError("bad-skip-waiting");if(n&&"boolean"!=typeof n)throw t.createError("bad-clients-claim");if(void 0!==s)if(!1===s||null===s)s=!1;else if("string"!=typeof s||0===s.length)throw t.createError("bad-directory-index");const c=[];o&&c.push(new _e({channelName:o,source:registration&&registration.scope?registration.scope:location})),this._runtimeCacheName=Y({cacheId:e}),this._revisionedCacheManager=new Le({cacheId:e,plugins:c}),this._strategies=new we({cacheId:e}),this._router=new G(this._revisionedCacheManager.getCacheName(),a),this._registerInstallActivateEvents(r,n),this._registerDefaultRoutes(i,s)}precache(e){if(!Array.isArray(e))throw t.createError("bad-revisioned-cache-list");this._revisionedCacheManager.addToCacheList({revisionedFiles:e})}get router(){return this._router}get strategies(){return this._strategies}get runtimeCacheName(){return this._runtimeCacheName}_registerInstallActivateEvents(e,t){self.addEventListener("install",t=>{const r=this._revisionedCacheManager.getCachedUrls();0<r.length&&F.debug({that:this,message:"The precached URLs will automatically be served using a\n            cache-first strategy.",data:{"Precached URLs":JSON.stringify(r)}}),t.waitUntil(this._revisionedCacheManager.install().then(()=>{if(e)return self.skipWaiting()}))}),self.addEventListener("activate",e=>{e.waitUntil(this._revisionedCacheManager.cleanup().then(()=>{if(t)return self.clients.claim()}))})}_registerDefaultRoutes(e,t){const r=[];(e||t)&&r.push(this._getCacheMatchPlugin(e,t));const n=this.strategies.cacheFirst({cacheName:this._revisionedCacheManager.getCacheName(),plugins:r,excludeCacheId:!0});this.router.registerRoute(({url:r})=>{r.hash="";const n=this._revisionedCacheManager.getCachedUrls();if(-1!==n.indexOf(r.href))return!0;let a=this._removeIgnoreUrlParams(r.href,e);return-1!==n.indexOf(a.href)||t&&a.pathname.endsWith("/")&&(r.pathname+=t,-1!==n.indexOf(r.href))},n)}_getCacheMatchPlugin(e,t){return{cacheWillMatch:async({request:r,cache:n,cachedResponse:a,matchOptions:s})=>{if(a)return a;let o=this._removeIgnoreUrlParams(r.url,e);return n.match(o.toString(),s).then(e=>!e&&o.pathname.endsWith("/")?(o.pathname+=t,n.match(o.toString(),s)):e)}}}_removeIgnoreUrlParams(e,t){const r=new URL(e),n=r.search.slice(1).split("&").map(e=>e.split("=")).filter(e=>t.every(t=>!t.test(e[0]))).map(e=>e.join("="));return r.search=n.join("&"),r}}}();const FetchRouter=function(){const e={get:[],post:[]};this.parseRoute=function(e){return this.parseGroups=function(e){for(var t=new RegExp(":([^/.\\\\]+)","g"),r=""+e,n={},a=null,s=0;a=t.exec(e);)n[a[1]]=s++,r=r.replace(a[0],"([^/.\\\\]+)");return{groups:n,regexp:new RegExp(r)}},this.parseGroups(e)};this.registerRoute=function(t,r,n,a){let s;r instanceof RegExp?s={regexp:r}:"string"==typeof r&&(s=this.parseRoute(r)),e[t].push({regex:s,callback:n,options:a||{}})},this.get=function(e,t,r){this.registerRoute("get",e,t,r)},this.post=function(e,t,r){this.registerRoute("get",e,t,r)},this.findRoute=function(t,r){return function(t,r){var n=null;const a=r.toLowerCase();if(a in e!=0)for(let r=0;n=e[a][r];r++){const e=n.options.urlMatchProperty,r=e in t?t[e]:t.toString(),a=n.regex.regexp.exec(r);if(0!=!!a){var s={};for(var o in n.regex.groups){var i=n.regex.groups[o];s[o]=a[i+1]}return n.params=s,n}}}(t,r)}},router=new FetchRouter;self.addEventListener("fetch",function(e){e.request;const t=new URL(e.request.url),r=e.request.method,n=router.findRoute(t,r);n&&n.callback(e,{params:n.params})});const workbox=new WorkboxSW({skipWaiting:!0,precacheChannelName:"install-cache-channel"});workbox.precache([{"url":"/assets/templates/all-styles.html","revision":"491301d56d29b7b9b952f1cc7e665a8e"},{"url":"/assets/templates/column.html","revision":"6f61103a74ca9c233b0f182f87fb986b"},{"url":"/assets/templates/columns-styles.html","revision":"e07b9f4a5771b6c87be69dd2b0c7ab87"},{"url":"/assets/templates/columns.html","revision":"1c5b1ade43ec866bc0453b9df1f4b41e"},{"url":"/assets/templates/head.html","revision":"84d2e9acd42dd85fd389da97c26595b6"},{"url":"/assets/templates/item.html","revision":"80d2570a5b61a1ef3e88c404dd15b6b5"},{"url":"/assets/templates/manifest.json","revision":"bca645c375a3a926f88bf8f9dd7ab292"},{"url":"/scripts/client.js","revision":"ec02e09ea129b9c85b5a20e67026dbe5"},{"url":"/styles/main.css","revision":"2d6e00cd65e600ced8986ccf7ca0fecc"},{"url":"/humans.txt","revision":"99d5885b218217d3334cd156bd014d25"},{"url":"/sw.js","revision":"3c135b5ee437c8d888bd4da7dd610b9b"}]);const templates$1={head:getCompiledTemplate(`${paths$1.assetPath}templates/head.html`),style:getCompiledTemplate(`${paths$1.assetPath}templates/columns-styles.html`),column:getCompiledTemplate(`${paths$1.assetPath}templates/column.html`),columns:getCompiledTemplate(`${paths$1.assetPath}templates/columns.html`),item:getCompiledTemplate(`${paths$1.assetPath}templates/item.html`),allStyle:getCompiledTemplate(`${paths$1.assetPath}templates/all-styles.html`),columnsStyle:getCompiledTemplate(`${paths$1.assetPath}templates/columns-styles.html`),manifest:getCompiledTemplate(`${paths$1.assetPath}templates/manifest.json`)},setHeader=(e,t,r)=>(e.headers.set(t,r),e),generator=generateIncrementalNonce("service-worker");router.get(`${self.location.origin}/proxy`,e=>{const t=handler$1(e.request,{dataPath:paths$1.dataPath,assetPath:paths$1.assetPath},templates$1);e.respondWith(t)},{urlMatchProperty:"href"}),router.get(`${self.location.origin}/all$`,e=>{const t={analytics:generator(),inlinedcss:generator(),style:generator()},r=handler$2(t,{dataPath:paths$1.dataPath,assetPath:paths$1.assetPath},templates$1).then(e=>setHeader(e,"Content-Security-Policy",generateCSPPolicy(t))).then(e=>setHeader(e,"Content-Type","text/html"));e.respondWith(r)},{urlMatchProperty:"href"}),router.get(`${self.location.origin}/$`,e=>{const t={analytics:generator(),inlinedcss:generator(),style:generator()},r=handler(t,{dataPath:paths$1.dataPath,assetPath:paths$1.assetPath},templates$1).then(e=>setHeader(e,"Content-Security-Policy",generateCSPPolicy(t))).then(e=>setHeader(e,"Content-Type","text/html"));e.respondWith(r)},{urlMatchProperty:"href"})}();
